(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[348],{989:(e,l,o)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/plots",function(){return o(21157)}])},11765:(e,l,o)=>{"use strict";o.d(l,{A:()=>i});var t=o(74848),n=o(26087),a=o(13210);function i(){return(0,t.jsxs)(a.A,{direction:"row",sx:{alignItems:"center"},children:[(0,t.jsx)(n.A,{}),(0,t.jsx)("span",{className:"text-secondary ms-2",children:"Loading..."})]})}},21157:(e,l,o)=>{"use strict";o.r(l),o.d(l,{default:()=>V});var t=o(74848),n=o(67888),a=o(87707),i=o(96540),r=o(13210),s=o(48443),u=o(77596);function d(e){let{label:l,value:o="",dispatchKey:a,dispatchType:i}=e,{tcState:r,tcDispatch:d}=(0,n.c4)();return(0,t.jsx)(s.A,{disablePortal:!0,sx:{flexGrow:1},getOptionKey:e=>e,getOptionLabel:e=>e,options:r.table.columns,value:o,renderInput:e=>(0,t.jsx)(u.A,{...e,label:l}),onChange:(e,l)=>{d({type:i,payload:{[a]:l}})}})}var c=o(14953),m=o.n(c),x=o(11765);let p=m()(()=>Promise.all([o.e(542),o.e(236)]).then(o.bind(o,91236)),{loadableGenerated:{webpack:()=>[91236]},ssr:!1,loading:x.A});function h(e){let l,o,t,n,a,i;return(l=e.slice().sort((e,l)=>e-l)).length/4%1==0?(o=.5*(l[l.length/4]+l[l.length/4+1]),t=.5*(l[l.length*(3/4)]+l[l.length*(3/4)+1])):(o=l[Math.floor(l.length/4+1)],t=l[Math.ceil(l.length*(3/4)+1)]),n=t-o,a=t+2.5*n,i=t-2.5*n,{q1:o,q3:t,iqr:n,maxValue:a,minValue:i}}function y(e,l){if(e.length<4||l.length<4)return[e,l];let o=h(e),t=h(l),n=[],a=[];for(let i=0;i<e.length;i++){let r=e[i],s=l[i];r>=o.minValue&&r<=o.maxValue&&s>=t.minValue&&s<=t.maxValue?(n.push(r),a.push(s)):(n.push(void 0),a.push(void 0))}return[n,a]}function g(e,l,o){if(e.length<4||l.length<4||o.length<4)return[e,l,o];let t=h(e),n=h(l),a=h(o),i=[],r=[],s=[];for(let u=0;u<e.length;u++){let d=e[u],c=l[u],m=o[u];d>=t.minValue&&d<=t.maxValue&&c>=n.minValue&&c<=n.maxValue&&m>=a.minValue&&m<=a.maxValue?(i.push(d),r.push(c),s.push(m)):(i.push(void 0),r.push(void 0),s.push(void 0))}return[i,r,s]}var C=o(86636),v=o(9831);function T(e){let{onClick:l}=e;return(0,t.jsx)(C.A,{color:"primary",sx:{p:1},onClick:l,children:(0,t.jsx)(v.A,{})})}var f=o(18799),j=o(81474),b=o(76547),O=o(46698),_=o(60686),w=o(76424);function P(e){let{view:l}=e,{tcState:o,tcDispatch:i}=(0,n.c4)(),r=(0,w.useRouter)();return(0,t.jsx)(_.A,{disabled:0==o.plots.filterIndex.length||o.plots.filterView!=l,variant:"contained",color:"primary",onClick:()=>{i({type:a.J.PLOT_SETUP,payload:{inspectSelected:!0}}),r.push("/table")},children:"Inspect Selected"})}function A(){let{tcState:e,tcDispatch:l}=(0,n.c4)(),o=e.plots.scatter,s=(0,i.useMemo)(()=>{var l,t,n;let a,i;let r,s=[];return""!=o.xColumn&&(r=null===(l=e.grid.data)||void 0===l?void 0:l.map(e=>e["tab:".concat(o.xColumn)])),""!=o.yColumn&&(s=null===(t=e.grid.data)||void 0===t?void 0:t.map(e=>e["tab:".concat(o.yColumn)])),""!=o.colorColumn&&(a=null===(n=e.grid.data)||void 0===n?void 0:n.map(e=>e["tab:".concat(o.colorColumn)]),i={orientation:"v"}),e.plots.scatter.filterOutliers&&r&&s&&r.length==s.length&&r.length>0&&(""!=o.colorColumn?[r,s,a]=g(r,s,a):[r,s]=y(r,s)),[{x:r,y:s,mode:"markers",name:"points",marker:{color:a||"royalblue",size:3,opacity:.7,colorbar:i},type:"scatter"},{x:r,name:"x density",marker:{color:"royalblue"},yaxis:"y2",type:"histogram"},{y:s,name:"y density",marker:{color:"royalblue"},xaxis:"x2",type:"histogram"}]},[e.grid.data,o.xColumn,o.yColumn,o.colorColumn,e.plots.scatter.filterOutliers]),u={showlegend:!1,autosize:!0,height:740,margin:{t:50},hovermode:"closest",bargap:0,uirevision:"true",xaxis:{domain:[0,.85],showgrid:!1,zeroline:!1,title:o.xColumn},yaxis:{domain:[0,.85],showgrid:!1,zeroline:!1,title:o.yColumn},xaxis2:{domain:[.85,1],showgrid:!1,zeroline:!1},yaxis2:{domain:[.85,1],showgrid:!1,zeroline:!1}};return(0,t.jsxs)(f.A,{sx:{width:"100%"},children:[(0,t.jsxs)(r.A,{direction:"row",gap:2,sx:{alignItems:"center"},children:[(0,t.jsx)(d,{label:"x axis",value:o.xColumn,dispatchKey:"xColumn",dispatchType:a.J.SCATTER_PLOT_SETUP}),(0,t.jsx)(T,{onClick:()=>l({type:a.J.SCATTER_PLOT_SETUP,payload:{xColumn:o.yColumn,yColumn:o.xColumn}})}),(0,t.jsx)(d,{label:"y axis",value:o.yColumn,dispatchKey:"yColumn",dispatchType:a.J.SCATTER_PLOT_SETUP}),(0,t.jsx)(O.A,{orientation:"vertical",variant:"middle",flexItem:!0,sx:{mx:1}}),(0,t.jsx)(d,{label:"color",value:o.colorColumn,dispatchKey:"colorColumn",dispatchType:a.J.SCATTER_PLOT_SETUP}),(0,t.jsx)(b.A,{label:"Filter outliers",control:(0,t.jsx)(j.A,{checked:e.plots.scatter.filterOutliers,onChange:e=>l({type:a.J.SCATTER_PLOT_SETUP,payload:{filterOutliers:e.target.checked}})})}),(0,t.jsx)(P,{view:"scatter"})]}),(0,t.jsx)(p,{data:s,layout:u,config:{responsive:!0},style:{width:"100%"},onSelected:e=>{var o;let t=null==e?void 0:null===(o=e.points)||void 0===o?void 0:o.map(e=>e.pointIndex);t&&t.length>0&&l({type:a.J.PLOT_SETUP,payload:{filterIndex:t,filterView:"scatter"}})}})]})}function E(){let{tcState:e,tcDispatch:l}=(0,n.c4)(),o=e.plots.color,s=(0,i.useMemo)(()=>{var l,t;let n,a=[];return""!=o.xColumn1&&""!=o.xColumn2&&(n=null===(l=e.grid.data)||void 0===l?void 0:l.map(e=>e["tab:".concat(o.xColumn1)]-e["tab:".concat(o.xColumn2)])),""!=o.yColumn1&&""!=o.yColumn2&&(a=null===(t=e.grid.data)||void 0===t?void 0:t.map(e=>e["tab:".concat(o.yColumn1)]-e["tab:".concat(o.yColumn2)])),[n,a]},[e.grid.data,o.xColumn1,o.xColumn2,o.yColumn1,o.yColumn2]),u=(0,i.useMemo)(()=>{let l,t;let[n,a]=s;if(""!=o.colorColumn){var i;l=null===(i=e.grid.data)||void 0===i?void 0:i.map(e=>e["tab:".concat(o.colorColumn)]),t={orientation:"v"}}return e.plots.color.filterOutliers&&n&&a&&n.length==a.length&&n.length>0&&(""!=o.colorColumn?[n,a,l]=g(n,a,l):[n,a]=y(n,a)),[{x:n,y:a,mode:"markers",name:"points",marker:{color:l||"royalblue",size:3,opacity:.7,colorbar:t},type:"scatter"},{x:n,name:"x density",marker:{color:"royalblue"},yaxis:"y2",type:"histogram"},{y:a,name:"y density",marker:{color:"royalblue"},xaxis:"x2",type:"histogram"}]},[s,e.plots.color.filterOutliers,o.colorColumn,e.grid.data]),c={showlegend:!1,autosize:!0,height:740,margin:{t:50},hovermode:"closest",bargap:0,uirevision:"true",xaxis:{domain:[0,.85],showgrid:!1,zeroline:!1,title:"".concat(o.xColumn1," - ").concat(o.xColumn2)},yaxis:{domain:[0,.85],showgrid:!1,zeroline:!1,title:"".concat(o.yColumn1," - ").concat(o.yColumn2)},xaxis2:{domain:[.85,1],showgrid:!1,zeroline:!1},yaxis2:{domain:[.85,1],showgrid:!1,zeroline:!1}};return(0,t.jsxs)(f.A,{sx:{width:"100%"},children:[(0,t.jsxs)(r.A,{direction:"row",spacing:1,sx:{alignItems:"center"},children:[(0,t.jsx)(d,{label:"x axis",value:o.xColumn1,dispatchKey:"xColumn1",dispatchType:a.J.COLOR_PLOT_SETUP}),(0,t.jsx)("span",{className:"fw-bold",children:"—"}),(0,t.jsx)(d,{label:"x axis",value:o.xColumn2,dispatchKey:"xColumn2",dispatchType:a.J.COLOR_PLOT_SETUP}),(0,t.jsx)(T,{onClick:()=>l({type:a.J.COLOR_PLOT_SETUP,payload:{xColumn1:o.yColumn1,yColumn1:o.xColumn1,xColumn2:o.yColumn2,yColumn2:o.xColumn2}})}),(0,t.jsx)(d,{label:"y axis",value:o.yColumn1,dispatchKey:"yColumn1",dispatchType:a.J.COLOR_PLOT_SETUP}),(0,t.jsx)("span",{className:"mx-2 fw-bold",children:"—"}),(0,t.jsx)(d,{label:"y axis",value:o.yColumn2,dispatchKey:"yColumn2",dispatchType:a.J.COLOR_PLOT_SETUP}),(0,t.jsx)(O.A,{orientation:"vertical",variant:"middle",flexItem:!0,sx:{mx:1}}),(0,t.jsx)(d,{label:"color",value:o.colorColumn,dispatchKey:"colorColumn",dispatchType:a.J.COLOR_PLOT_SETUP}),(0,t.jsx)(b.A,{label:"Filter outliers",control:(0,t.jsx)(j.A,{checked:e.plots.color.filterOutliers,onChange:e=>l({type:a.J.COLOR_PLOT_SETUP,payload:{filterOutliers:e.target.checked}})})}),(0,t.jsx)(P,{view:"color"})]}),(0,t.jsx)(p,{data:u,layout:c,config:{responsive:!0},style:{width:"100%"},onSelected:e=>{var o,t;let n=null==e?void 0:null===(o=e.points)||void 0===o?void 0:o.map(e=>e.pointIndex);n&&n.length>0&&l({type:a.J.PLOT_SETUP,payload:{filterIndex:null==e?void 0:null===(t=e.points)||void 0===t?void 0:t.map(e=>e.pointIndex),filterView:"color"}})}})]})}function S(){let{tcState:e,tcDispatch:l}=(0,n.c4)(),o=e.plots.histogram,s=(0,i.useMemo)(()=>{let l=[];if(""!=o.column){var t;l=null===(t=e.grid.data)||void 0===t?void 0:t.map(e=>e["tab:".concat(o.column)])}return e.plots.histogram.filterOutliers&&l&&l.length>0&&(l=function(e){if(e.length<4)return e;let l=h(e);return e.map(e=>{if(e>=l.minValue&&e<=l.maxValue)return e})}(l)),[{x:l,name:"x density",marker:{color:"royalblue"},type:"histogram"}]},[e.grid.data,o.column,e.plots.histogram.filterOutliers]),u={showlegend:!1,autosize:!0,height:740,hovermode:"closest",bargap:0,uirevision:"true",xaxis:{showgrid:!1,zeroline:!1,title:o.column},yaxis:{showgrid:!1,zeroline:!1,title:"Count"}};return(0,t.jsxs)(f.A,{sx:{width:"100%"},children:[(0,t.jsxs)(r.A,{direction:"row",spacing:1,sx:{alignItems:"center"},children:[(0,t.jsx)(d,{label:"column",value:o.column,dispatchKey:"column",dispatchType:a.J.HISTOGRAM_PLOT_SETUP}),(0,t.jsx)(b.A,{label:"Filter outliers",control:(0,t.jsx)(j.A,{checked:e.plots.histogram.filterOutliers,onChange:e=>l({type:a.J.HISTOGRAM_PLOT_SETUP,payload:{filterOutliers:e.target.checked}})})}),(0,t.jsx)(P,{view:"histogram"})]}),(0,t.jsx)(p,{data:s,layout:u,config:{responsive:!0},style:{width:"100%"},onSelected:e=>{var o,t;let n=null==e?void 0:null===(o=e.points)||void 0===o?void 0:o.map(e=>e.pointIndex);n&&n.length>0&&l({type:a.J.PLOT_SETUP,payload:{filterIndex:null==e?void 0:null===(t=e.points)||void 0===t?void 0:t.map(e=>e.pointIndex),filterView:"histogram"}})}})]})}var L=o(92469),k=o(5733),I=o(10051),J=o(63549);function U(){let{tcState:e,tcDispatch:l}=(0,n.c4)();return(0,t.jsxs)(k.Ay,{value:e.plots.currentView,children:[(0,t.jsx)(f.A,{sx:{borderBottom:1,borderColor:"divider",width:"100%"},children:(0,t.jsxs)(J.A,{onChange:(e,o)=>{l({type:a.J.PLOT_VIEW_CHANGE,payload:o})},"aria-label":"data visualization",children:[(0,t.jsx)(L.A,{label:"Scatter plot",value:"scatter"}),(0,t.jsx)(L.A,{label:"Color-color diagram",value:"color"}),(0,t.jsx)(L.A,{label:"Histogram",value:"histogram"})]})}),(0,t.jsx)(I.A,{value:"scatter",sx:{},children:(0,t.jsx)(A,{})}),(0,t.jsx)(I.A,{value:"color",sx:{},children:(0,t.jsx)(E,{})}),(0,t.jsx)(I.A,{value:"histogram",sx:{},children:(0,t.jsx)(S,{})})]})}function V(){let{tcState:e}=(0,n.c4)(),l=(0,w.useRouter)();return(0,i.useEffect)(()=>{e.grid.data||l.push("/")},[e.grid.data,l]),(0,t.jsx)(U,{})}}},e=>{var l=l=>e(e.s=l);e.O(0,[169,636,593,792],()=>l(989)),_N_E=e.O()}]);