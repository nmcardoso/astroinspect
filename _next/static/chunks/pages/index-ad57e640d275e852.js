(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{67594:function(e){function s(e){return Promise.resolve().then(function(){var s=Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s})}s.keys=function(){return[]},s.resolve=s,s.id=67594,e.exports=s},48312:function(e,s,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return l(63539)}])},44504:function(e,s,l){"use strict";l.d(s,{bI:function(){return o},m6:function(){return j},uu:function(){return g}});var t=l(85893),a=l(67294),n=l(69483),i=l.n(n),r=l(55531);let o=22,c=()=>({schemaVersion:o,table:{type:"local",file:void 0,url:void 0,selectedColumnsId:[],columns:[],raIndex:void 0,decIndex:void 0,raCol:void 0,decCol:void 0,state:"unloaded",isSameFile:!1,dataTypes:void 0},grid:{data:void 0,colDef:void 0,api:void 0,isLoaded:!1,currColConfigs:void 0,currTale:void 0,editable:!1},currentView:"settings",cols:{classification:{enabled:!1,type:"categorical",classNames:[],positiveClass:"",negativeClass:"",filterUnclassified:!0,keyMap:{}},sdssCatalog:{selectedColumns:[]},splusImaging:{enabled:!0,type:"trilogy",pixelScale:.4,trilogyConfig:{R:["R","I","F861","Z"],G:["G","F515","F660"],B:["U","F378","F395","F410","F430"],noise:.15,Q:.2},luptonConfig:{R:"I",G:"R",B:"G",stretch:1.4,Q:6.2}},legacyImaging:{enabled:!0,pixelScale:.4,autoPixelScale:!0,dataRelease:"10"},sdssSpectra:{enabled:!0},splusPhotoSpectra:{enabled:!0,selectedLines:["iso","aper6"]},customImaging:{enabled:!1,columns:[{url:"",fileExtension:"",columnIndex:-1}]}},plots:{scatter:{xColumn:"",yColumn:"",colorColumn:"",sizeColumn:"",filterOutliers:!0},color:{xColumn1:"",xColumn2:"",yColumn1:"",yColumn2:"",colorColumn:"",sizeColumn:"",filterOutliers:!0},histogram:{column:"",bins:30,filterOutliers:!0},currentView:"scatter",filterIndex:[],filterView:void 0,inspectSelected:!1}}),d=c(),m=e=>{let s={...e,table:c().table,grid:c().grid,currentView:c().currentView};i().setItem("tableConfigState",s,(e,s)=>{e&&console.error(e)})};function u(e,s,l){let t={...e};for(let e in s.payload)l(t)[e]=s.payload[e];return m(t),t}let h={[r.p.LOAD_SAVED_STATE]:(e,s)=>s.payload,[r.p.USER_FILE_INPUT]:(e,s)=>u(e,s,e=>e.table),[r.p.CLASSIFICATION_CONFIG]:(e,s)=>u(e,s,e=>e.cols.classification),[r.p.SPLUS_TRILOGY_CONFIG]:(e,s)=>u(e,s,e=>e.cols.splusImaging.trilogyConfig),[r.p.SPLUS_IMAGING]:(e,s)=>u(e,s,e=>e.cols.splusImaging),[r.p.SPLUS_LUPTON_CONFIG]:(e,s)=>u(e,s,e=>e.cols.splusImaging.luptonConfig),[r.p.SPLUS_PHOTO_SPECTRA]:(e,s)=>u(e,s,e=>e.cols.splusPhotoSpectra),[r.p.LEGACY_IMAGING]:(e,s)=>u(e,s,e=>e.cols.legacyImaging),[r.p.SDSS_IMAGING]:(e,s)=>u(e,s,e=>e.cols.sdssSpectra),[r.p.SDSS_CATALOG]:(e,s)=>u(e,s,e=>e.cols.sdssCatalog),[r.p.CUSTOM_IMAGE_NEW]:(e,s)=>{let l={...e};return l.cols.customImaging.columns=[...s.payload.prevColumns,{url:"",fileExtension:"",columnIndex:-1}],m(l),l},[r.p.CUSTOM_IMAGE_UPDATE]:(e,s)=>u(e,s,e=>e.cols.customImaging.columns[s.payload.index]),[r.p.CUSTOM_IMAGE_REMOVE]:(e,s)=>{let l={...e};return l.cols.customImaging.columns=s.payload.prevColumns.filter((e,l)=>l!=s.payload.index),m(l),l},[r.p.CUSTOM_IMAGE_ENABLE]:(e,s)=>u(e,s,e=>e.cols.customImaging),[r.p.GRID_UPDATE]:(e,s)=>u(e,s,e=>e.grid),[r.p.CURRENT_VIEW_CHANGE]:(e,s)=>{let l={...e};return l.currentView=s.payload,l},[r.p.SCATTER_PLOT_SETUP]:(e,s)=>u(e,s,e=>e.plots.scatter),[r.p.COLOR_PLOT_SETUP]:(e,s)=>u(e,s,e=>e.plots.color),[r.p.HISTOGRAM_PLOT_SETUP]:(e,s)=>u(e,s,e=>e.plots.histogram),[r.p.PLOT_VIEW_CHANGE]:(e,s)=>{let l={...e};return l.plots.currentView=s.payload,l},[r.p.PLOT_SETUP]:(e,s)=>u(e,s,e=>e.plots)},p=(e,s)=>h[s.type](e,s),x=(0,a.createContext)({tcState:d,tcDispatch:()=>{}}),g=e=>{let{children:s}=e,[l,n]=(0,a.useReducer)(p,d);return(0,t.jsx)(x.Provider,{value:{tcState:l,tcDispatch:n},children:s})},j=()=>(0,a.useContext)(x)},55531:function(e,s,l){"use strict";var t,a;l.d(s,{p:function(){return t}}),(a=t||(t={}))[a.LOAD_SAVED_STATE=0]="LOAD_SAVED_STATE",a[a.USER_FILE_INPUT=1]="USER_FILE_INPUT",a[a.GRID_UPDATE=2]="GRID_UPDATE",a[a.CLASSIFICATION_CONFIG=3]="CLASSIFICATION_CONFIG",a[a.SPLUS_TRILOGY_CONFIG=4]="SPLUS_TRILOGY_CONFIG",a[a.SPLUS_IMAGING=5]="SPLUS_IMAGING",a[a.SPLUS_LUPTON_CONFIG=6]="SPLUS_LUPTON_CONFIG",a[a.SPLUS_PHOTO_SPECTRA=7]="SPLUS_PHOTO_SPECTRA",a[a.LEGACY_IMAGING=8]="LEGACY_IMAGING",a[a.SDSS_IMAGING=9]="SDSS_IMAGING",a[a.SDSS_CATALOG=10]="SDSS_CATALOG",a[a.CUSTOM_IMAGE_NEW=11]="CUSTOM_IMAGE_NEW",a[a.CUSTOM_IMAGE_UPDATE=12]="CUSTOM_IMAGE_UPDATE",a[a.CUSTOM_IMAGE_REMOVE=13]="CUSTOM_IMAGE_REMOVE",a[a.CUSTOM_IMAGE_ENABLE=14]="CUSTOM_IMAGE_ENABLE",a[a.CURRENT_VIEW_CHANGE=15]="CURRENT_VIEW_CHANGE",a[a.SCATTER_PLOT_SETUP=16]="SCATTER_PLOT_SETUP",a[a.COLOR_PLOT_SETUP=17]="COLOR_PLOT_SETUP",a[a.HISTOGRAM_PLOT_SETUP=18]="HISTOGRAM_PLOT_SETUP",a[a.PLOT_VIEW_CHANGE=19]="PLOT_VIEW_CHANGE",a[a.PLOT_SETUP=20]="PLOT_SETUP"},63539:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return lr}});var t=l(85893),a=l(67294),n=l(69483),i=l.n(n),r=l(44504),o=l(55531);function c(){let{tcDispatch:e}=(0,r.m6)();return(0,a.useEffect)(()=>{i().getItem("tableConfigState",(s,l)=>{s||null===l||l.schemaVersion!==r.bI||e({type:o.p.LOAD_SAVED_STATE,payload:l})})},[e]),null}var d=l(9008),m=l.n(d),u=l(688),h=l(62184),p=l(16698),x=l(57083),g=l(38447),j=l(74855),y=l(30404);let f="10.5281/zenodo.7268504",b="@software{astrotools,\n    doi = {10.5281/zenodo.7268504},\n    url = {https://doi.org/10.5281/zenodo.7268504},\n    year = {2022},\n    month = oct,\n    publisher = {Zenodo},\n    author = {Cardoso, N. M.},\n    title = {Astrotools: Web-based astronomical tools}\n}",v=e=>{let{show:s,onHide:l}=e,[n,i]=(0,a.useState)(!1),[r,o]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{n&&setTimeout(()=>i(!1),3e3),r&&setTimeout(()=>o(!1),3e3)},[n,r]),(0,t.jsxs)(g.Z,{show:s,onHide:l,animation:!1,size:"lg",centered:!0,children:[(0,t.jsx)(g.Z.Header,{closeButton:!0,children:(0,t.jsx)(g.Z.Title,{as:"h5",id:"contained-modal-title-vcenter",children:"How to cite this software"})}),(0,t.jsxs)(g.Z.Body,{children:[(0,t.jsx)("p",{children:"If you used this software during the production process of your scientific project, please consider citing it with the information provided below."}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)(p.Z,{children:"DOI"}),(0,t.jsx)(j.CopyToClipboard,{text:f,onCopy:()=>i(!0),children:(0,t.jsx)(x.Z,{variant:"link",size:"sm",children:"Copy to Clipboard"})}),n&&(0,t.jsx)("small",{className:"text-success ms-3",children:"Copied!"}),(0,t.jsx)("pre",{className:"pre-scrollabes bg-dark bg-opacity-10 rounded-3 p-3",children:f})]}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)(p.Z,{children:"BibTex"}),(0,t.jsx)(j.CopyToClipboard,{text:b,onCopy:()=>o(!0),children:(0,t.jsx)(x.Z,{variant:"link",size:"sm",children:"Copy to Clipboard"})}),r&&(0,t.jsx)("small",{className:"text-success ms-3",children:"Copied!"}),(0,t.jsx)("pre",{className:"pre-scrollabes bg-dark bg-opacity-10 rounded-3 p-3",children:b})]})]})]})};function C(){let[e,s]=(0,a.useState)(!1);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(x.Z,{size:"sm",variant:"outline-primary",className:"d-inline-flex align-items-center",onClick:()=>s(!0),children:[(0,t.jsx)(y.X1l,{className:"me-1",size:18}),(0,t.jsx)("span",{children:"Cite this software"})]}),(0,t.jsx)(v,{show:e,onHide:()=>s(!1)})]})}function S(e,s,l){if("ms"===l)switch(s){case"sec":return 1e3*e;case"min":return 6e4*e;case"hour":return 36e5*e;case"day":return 864e5*e;case"week":return 252e5*e;case"month":return 2592e6*e}}function I(e,s){let l=RegExp("^".concat(e,"_?J?d*?$"),"gi");return s.findIndex((e,s)=>null!==l.exec(e))}var Z=l(25675),N=l.n(Z),T=l(41664),_=l.n(T);function w(){return(0,t.jsx)(h.Z.Brand,{as:"div",className:"",children:(0,t.jsx)(_(),{href:"/",children:(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[(0,t.jsx)(N(),{alt:"AstronInspect",src:"".concat("/","galaxy_128.png"),width:"30",height:"30",className:"d-inline-block align-top"}),(0,t.jsx)("span",{className:"ms-2 fw-bold",children:"AstroInspect"})]})})})}var E=l(55071),L=l(4055),P=l(71470);function O(e){let{children:s,title:l=null,placement:a="auto",className:n=""}=e,i=(0,t.jsxs)(L.Z,{id:"help-popover",children:[l&&(0,t.jsx)(L.Z.Header,{as:"h3",children:l}),(0,t.jsx)(L.Z.Body,{children:s})]});return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(E.Z,{trigger:"click",rootClose:!0,placement:a,overlay:i,children:(0,t.jsx)(x.Z,{variant:"link",className:"p-0 d-inline-flex align-items-center ".concat(n),children:(0,t.jsx)(P.CUu,{size:20})})})})}var k=l(91409),U=l(7772),R=l(84940),A=l(78587),F=l(21096);let G=e=>{let{show:s,onHide:l}=e,{tcState:n,tcDispatch:i}=(0,r.m6)(),[o,c]=(0,a.useState)(""),[d,m]=(0,a.useState)("all"),[u,h]=(0,a.useState)("all"),[p,j]=(0,a.useState)(!1);return(0,t.jsxs)(g.Z,{show:s,onHide:l,animation:!1,size:"lg",centered:!0,children:[(0,t.jsx)(g.Z.Header,{closeButton:!0,children:(0,t.jsx)(g.Z.Title,{as:"h5",id:"contained-modal-title-vcenter",children:"Download current table"})}),(0,t.jsx)(g.Z.Body,{children:(0,t.jsxs)(U.Z,{onSubmit:e=>{let s;e.preventDefault(),n.grid.api.exportDataAsCsv({suppressQuotes:!0,columnKeys:[..."selected"===d?n.table.selectedColumnsId.map(e=>"tab:".concat(n.table.columns[e])):n.table.columns.map(e=>"tab:".concat(e)),...n.cols.sdssCatalog.selectedColumns.map(e=>"sdss:".concat(e.table,"_").concat(e.column)),...n.cols.classification.enabled?["ai:class"]:[]],fileName:o||"AstroInspect",exportedRows:p?"filteredAndSorted":"all",shouldRowBeSkipped:"classified"===u?e=>{var s,l;let{node:t}=e;return(null===(s=t.data)||void 0===s?void 0:s["ai:class"])===void 0||(null===(l=t.data)||void 0===l?void 0:l["ai:class"])===""}:"unclassified"===u?e=>{var s,l;let{node:t}=e;return(null===(s=t.data)||void 0===s?void 0:s["ai:class"])!==void 0||(null===(l=t.data)||void 0===l?void 0:l["ai:class"])!==""}:void 0,processHeaderCallback:e=>{let{column:s}=e;return"ai:class"===s.getColDef().field?"AstroInspectClass":s.getColDef().headerName}})},className:"mt-3",children:[(0,t.jsxs)(U.Z.Group,{as:A.Z,className:"mb-2",controlId:"classDownload",children:[(0,t.jsx)(U.Z.Label,{column:!0,sm:"2",className:"text-end",children:"File name"}),(0,t.jsx)(k.Z,{sm:8,children:(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[(0,t.jsxs)(R.Z,{children:[(0,t.jsx)(U.Z.Control,{value:o,onChange:e=>c(e.target.value),placeholder:"File name"}),(0,t.jsx)(R.Z.Text,{id:"basic-addon2",children:".csv"})]}),(0,t.jsx)(O,{title:"File name",className:"ms-2",children:"Choose a name and save your classifications in local computer"})]})})]}),n.cols.classification.enabled&&(0,t.jsxs)(U.Z.Group,{as:A.Z,className:"mb-2",controlId:"colFilter",children:[(0,t.jsx)(U.Z.Label,{column:!0,sm:"2",className:"text-end",children:"Classification"}),(0,t.jsx)(k.Z,{sm:8,children:(0,t.jsxs)("div",{className:"d-flex align-items-center mt-2",children:[(0,t.jsx)(U.Z.Check,{inline:!0,className:"me-4",checked:"all"===u,label:"all",name:"filterClass",type:"radio",value:"all",id:"filterClass-1",onChange:e=>h("all")}),(0,t.jsx)(U.Z.Check,{inline:!0,className:"me-4",checked:"classified"===u,label:"classified only",name:"filterClass",type:"radio",value:"classified",id:"filterClass-2",onChange:e=>h("classified")}),(0,t.jsx)(U.Z.Check,{inline:!0,className:"me-2",checked:"unclassified"===u,label:"unclassified only",name:"filterClass",type:"radio",value:"unclassified",id:"filterClass-3",onChange:e=>h("unclassified")}),(0,t.jsxs)(O,{title:"Filter rows by class",className:"ms-0",children:["This setting will sample the rows based in the classification state:",(0,t.jsxs)("ul",{children:[(0,t.jsxs)("li",{children:[(0,t.jsx)("b",{children:"all: "})," in this case, no filtering is performed and the output table will contain all rows, including both classified and unclassified rows"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("b",{children:"classified only: "})," the output table will contain only classified rows"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("b",{children:"unclassified only: "})," the output table will contain only unclassified rows"]})]})]})]})})]}),(0,t.jsxs)(U.Z.Group,{as:A.Z,className:"mb-2",controlId:"filterRow-2",children:[(0,t.jsx)(U.Z.Label,{column:!0,sm:"2",className:"text-end",children:"Rows"}),(0,t.jsx)(k.Z,{sm:8,children:(0,t.jsxs)("div",{className:"d-flex align-items-center mt-2",children:[(0,t.jsx)(U.Z.Check,{inline:!0,checked:p,label:"filter & sort",name:"filterRow",type:"checkbox",value:"filteredAndSorted",id:"filterRow-2",onChange:e=>j(!p)}),(0,t.jsxs)(O,{title:"Filter rows by filter",className:"ms-0",children:["This setting will sample the rows based in the following criteria:",(0,t.jsxs)("ul",{children:[(0,t.jsxs)("li",{children:["If this option is ",(0,t.jsx)("b",{children:"selected"}),", the same filters applied in the application will also be applied to the output table, that is, it will contain the ",(0,t.jsx)("u",{children:"same rows that you are seeing in the application"})," and in the same order."]}),(0,t.jsxs)("li",{children:["If this option is ",(0,t.jsx)("b",{children:"unselected"}),", no filtering is performed and the output table will have the ",(0,t.jsx)("u",{children:"same rows as the input table"})," and in same order."]})]}),(0,t.jsx)("b",{children:"Note: "})," If you have not applied any filtering or sorting to the columns, then the result will be the same for any option in this setting."]})]})})]}),(0,t.jsxs)(U.Z.Group,{as:A.Z,className:"my-3",controlId:"classDownloadBtn",children:[(0,t.jsx)(U.Z.Label,{column:!0,sm:"2",className:"text-end"}),(0,t.jsx)(k.Z,{sm:8,children:(0,t.jsx)(R.Z,{children:(0,t.jsxs)(x.Z,{variant:"primary",type:"submit",children:[(0,t.jsx)(F.xOH,{size:18,className:"me-1"})," ","Download table"]})})})]})]})})]})};function z(){let{tcState:e}=(0,r.m6)(),[s,l]=(0,a.useState)(!1);return e.grid.isLoaded?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(x.Z,{variant:"outline-primary",className:"d-inline-flex align-items-center",onClick:()=>l(!0),size:"sm",children:[(0,t.jsx)(F.xOH,{size:19,className:"me-1"}),(0,t.jsx)("span",{children:"Download"})]}),(0,t.jsx)(G,{show:s,onHide:()=>l(!1)})]}):null}var D=l(65555),M=l(89556),V=l(88937);let B=Symbol("Queued"),H=Symbol("Loading"),q=Symbol("Load Error"),K=()=>(0,t.jsxs)("span",{className:"text-dark",children:[(0,t.jsx)(V.xps,{size:15})," Queued"]}),W=()=>(0,t.jsxs)("span",{className:"text-primary",children:[(0,t.jsx)(D.uKn,{size:15})," Downloading"]}),Q=()=>(0,t.jsxs)("span",{className:"text-danger",children:[(0,t.jsx)(D.wr$,{size:15})," Server Error"]});function Y(e){let s=(0,a.useMemo)(()=>e.value===B?K:e.value===H?W:e.value===q?Q:()=>(0,t.jsx)("span",{children:e.value}),[e.value]);return(0,t.jsx)(s,{})}let J=e=>{let{show:s,onHide:l,src:a,size:n,zoomWidth:i,zoomHeight:r}=e;return(0,t.jsx)(g.Z,{centered:!0,show:s,onHide:l,animation:!1,size:n,children:(0,t.jsx)(g.Z.Body,{className:"mx-auto px-0 py-2",children:(0,t.jsx)("img",{src:a,width:i,height:r,alt:""})})})},X=()=>(0,t.jsx)("div",{className:"border d-flex align-items-center justify-content-center",style:{width:120,height:120,backgroundColor:"#f5f5f5"},children:(0,t.jsxs)("span",{className:"text-dark",children:[(0,t.jsx)(V.xps,{size:15})," Queued"]})}),$=()=>(0,t.jsx)("div",{className:"border d-flex align-items-center justify-content-center",style:{width:120,height:120,backgroundColor:"#f5f5f5"},children:(0,t.jsxs)("span",{className:"text-primary",children:[(0,t.jsx)(D.uKn,{size:15})," Downloading"]})}),ee=()=>(0,t.jsx)("div",{className:"border d-flex align-items-center justify-content-center",style:{width:120,height:120,backgroundColor:"#f5f5f5"},children:(0,t.jsxs)("span",{className:"text-danger",children:[(0,t.jsx)(D.wr$,{size:15})," Server Error"]})});function es(e){let{src:s,zoomWidth:l,zoomHeight:n,modalSize:i="",lazy:r=!1}=e,[o,c]=(0,a.useState)(!1),d=(0,a.useMemo)(()=>s===B?X:s===H?$:s===q?ee:()=>(0,t.jsx)("img",{src:s,alt:"",loading:r?"lazy":"eager",height:120,style:{cursor:"zoom-in"},onClick:()=>c(!0)}),[s,r]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d,{}),(0,t.jsx)(J,{show:o,onHide:()=>c(!1),src:s,size:i,zoomWidth:l,zoomHeight:n})]})}function el(e){let{zoomWidth:s,zoomHeight:l,modalSize:a="",lazy:n=!1}=e;return function(e){return(0,t.jsx)(es,{src:e.value,zoomWidth:s,zoomHeight:l,modalSize:a,lazy:n})}}let et={field:"ai:id",maxWidth:80,headerName:"#"},ea={field:"ai:class",flex:1,headerName:"class",filter:!0,cellRenderer:function(e){let{tcState:s}=(0,r.m6)();return(0,t.jsxs)(U.Z.Select,{value:e.value,onChange:s=>{var l;null===(l=e.api.getRowNode(e.data["ai:id"]))||void 0===l||l.setDataValue("ai:class",s.target.value)},children:[(0,t.jsx)("option",{value:"",children:"-"}),s.cols.classification.classNames.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})}},en={field:"img:splus",flex:1,headerName:"splus",cellRenderer:el({zoomHeight:650,modalSize:"lg"})},ei={field:"img:legacy",flex:1,headerName:"legacy",cellRenderer:el({zoomHeight:650,modalSize:"lg"})},er={field:"img:sdss_spec",flex:1,headerName:"spec",cellRenderer:el({zoomHeight:620,modalSize:"lg"})},eo={field:"img:splus_photospec",flex:1,headerName:"photo spec",cellRenderer:el({zoomHeight:625,modalSize:"lg"})},ec=e=>({field:"img:custom_".concat(e),flex:1,headerName:"custom ".concat(e+1),cellRenderer:el({zoomHeight:650,modalSize:"lg",lazy:!0})}),ed=(e,s)=>({field:"sdss:".concat(e,"_").concat(s),flex:1,headerName:s.toLowerCase(),filter:!0,cellRenderer:Y}),em=function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=arguments.length>2?arguments[2]:void 0;return{field:"tab:".concat(e),flex:1,headerName:e.toLowerCase(),filter:!0,editable:s,...l?{cellDataType:l}:{}}};class eu{getColDefs(e){let s=[et],l={};if(e.cols.classification.enabled&&(s.push(ea),l["ai:class"]=void 0),e.table.selectedColumnsId)for(let l of e.table.selectedColumnsId){var t;let a=e.table.columns[l],n=null===(t=e.table.dataTypes)||void 0===t?void 0:t[l],i=e.grid.editable;s.push(em(a,i,n))}if(e.cols.sdssCatalog.selectedColumns)for(let t of e.cols.sdssCatalog.selectedColumns)s.push(ed(t.table,t.column)),l["sdss:".concat(t.table,"_").concat(t.column)]=B;return e.cols.sdssSpectra.enabled&&(s.push(er),l["img:sdss_spec"]=B),e.cols.splusPhotoSpectra.enabled&&(s.push(eo),l["img:splus_photospec"]=B),e.cols.legacyImaging.enabled&&(s.push(ei),l["img:legacy"]=B),e.cols.splusImaging.enabled&&(s.push(en),l["img:splus"]=B),e.cols.customImaging.enabled&&e.cols.customImaging.columns.forEach((e,t,a)=>{s.push(ec(t)),l["img:custom_".concat(t)]=B}),{colDef:s,initVal:l}}}var eh=new eu;function ep(){let{tcState:e}=(0,r.m6)(),[s,l]=(0,a.useState)(!1),n=()=>{let t={...e};t.grid.editable=!s;let{colDef:a}=eh.getColDefs(t);e.grid.api.setGridOption("columnDefs",a),l(!s)};return"grid"!=e.currentView?null:(0,t.jsx)(t.Fragment,{children:s?(0,t.jsxs)(x.Z,{size:"sm",variant:"success",className:"d-inline-flex align-items-center",onClick:n,children:[(0,t.jsx)(D.zmo,{size:18,className:"me-1"}),(0,t.jsx)("span",{children:"Edit"})]}):(0,t.jsxs)(x.Z,{size:"sm",variant:"outline-primary",className:"d-inline-flex align-items-center",onClick:n,children:[(0,t.jsx)(M.bt0,{size:18,className:"me-1"}),(0,t.jsx)("span",{children:"View"})]})})}var ex=l(18687);let eg="bg-white text-primary px-3 rounded-5",ej="rounded-5";function ey(){let{tcState:e,tcDispatch:s}=(0,r.m6)(),l=e=>{s({type:o.p.CURRENT_VIEW_CHANGE,payload:e})};return(0,t.jsxs)(ex.Z,{className:"bg-primary rounded-5",children:[(0,t.jsx)(x.Z,{variant:"primary",className:"settings"==e.currentView?eg:ej,size:"sm",onClick:()=>l("settings"),children:"Setup"}),(0,t.jsx)(x.Z,{variant:"primary",className:"grid"==e.currentView?eg:ej,size:"sm",disabled:!e.grid.isLoaded,onClick:()=>l("grid"),children:"Table"}),(0,t.jsx)(x.Z,{variant:"primary",className:"plots"==e.currentView?eg:ej,size:"sm",disabled:!e.grid.isLoaded,onClick:()=>l("plots"),children:"Plots"})]})}var ef=l(71643);function eb(){var e,s;let{tcState:l}=(0,r.m6)();return(0,t.jsx)("div",{className:"text-muted",style:{overflow:"hidden",textOverflow:"ellipsis",maxWidth:"310px",whiteSpace:"nowrap"},children:null===(s=l.table)||void 0===s?void 0:null===(e=s.file)||void 0===e?void 0:e.name})}let ev=(0,t.jsxs)(L.Z,{id:"popover-basic",children:[(0,t.jsx)(L.Z.Header,{as:"h3",children:"Disable plot filter"}),(0,t.jsxs)(L.Z.Body,{children:["click to ",(0,t.jsx)("b",{children:"disable"})," the filter generated by the selection in the plot and show all rows in the table"]})]}),eC=(0,t.jsxs)(L.Z,{id:"popover-basic",children:[(0,t.jsx)(L.Z.Header,{as:"h3",children:"Enable plot filter"}),(0,t.jsxs)(L.Z.Body,{children:["Click to ",(0,t.jsx)("b",{children:"enable"})," the filter generated by the selection in the plot and show only the selected objects"]})]});function eS(){let{tcState:e,tcDispatch:s}=(0,r.m6)(),l=()=>{s({type:o.p.PLOT_SETUP,payload:{inspectSelected:!e.plots.inspectSelected}})};return(0,t.jsxs)(t.Fragment,{children:[e.grid.isLoaded&&e.plots.inspectSelected&&e.plots.filterIndex&&e.plots.filterIndex.length>0&&(0,t.jsx)(E.Z,{trigger:"hover",placement:"bottom",overlay:ev,children:(0,t.jsx)(x.Z,{variant:"primary",className:"d-inline-flex align-items-center ms-2",onClick:()=>l(),size:"sm",children:(0,t.jsx)(D.O$5,{size:19,className:""})})}),e.grid.isLoaded&&!e.plots.inspectSelected&&e.plots.filterIndex&&e.plots.filterIndex.length>0&&(0,t.jsx)(E.Z,{trigger:"hover",placement:"bottom",overlay:eC,children:(0,t.jsx)(x.Z,{variant:"outline-primary",className:"d-inline-flex align-items-center ms-2",onClick:()=>l(),size:"sm",children:(0,t.jsx)(D.EGO,{size:19,className:""})})})]})}function eI(){return(0,t.jsxs)("span",{className:"text-muded text-secondary fw-bold small",children:["v","1.5"]})}function eZ(){let{tcState:e}=(0,r.m6)();return(0,t.jsx)(h.Z,{bg:"light",expand:"lg",className:"p-1",children:(0,t.jsxs)(u.Z,{fluid:!0,children:[(0,t.jsx)(ey,{}),(0,t.jsx)(eS,{}),(0,t.jsxs)(ef.Z,{direction:"horizontal",className:"mx-auto",children:[(0,t.jsx)(w,{}),(0,t.jsx)(eb,{})]}),(0,t.jsxs)(ef.Z,{direction:"horizontal",gap:2,children:[(0,t.jsx)(eI,{}),(0,t.jsx)(z,{}),(0,t.jsx)(ep,{}),(0,t.jsx)(C,{})]})]})})}var eN=l(87142),eT=l(7518),e_=l(17615),ew=l.n(e_);function eE(e){let{children:s,value:l=null,className:a="",onClose:n=()=>{},closeable:i=!0}=e;return(0,t.jsxs)("div",{className:"".concat(ew().chip," ").concat(a),children:[s,i&&(0,t.jsx)("span",{className:ew().closebtn,onClick:e=>{n(e,l)},children:"\xd7"})]})}var eL=l(9540);let eP=(e,s,l)=>{let t=e.trim();t&&!s.includes(t)&&(s.push(t),l({type:o.p.CLASSIFICATION_CONFIG,payload:{classNames:s}}))},eO=(e,s,l)=>{let t=s.filter(s=>s!=e);l({type:o.p.CLASSIFICATION_CONFIG,payload:{classNames:t}})};function ek(){let{tcState:e,tcDispatch:s}=(0,r.m6)(),l=e.cols.classification,[n,i]=(0,a.useState)(""),[o,c]=(0,a.useState)(!1);return(0,t.jsxs)(U.Z.Group,{as:A.Z,className:"mb-2",controlId:"classNames",children:[(0,t.jsx)(U.Z.Label,{column:!0,sm:1,children:"Classes"}),(0,t.jsxs)(k.Z,{sm:8,children:[(0,t.jsx)(U.Z,{onSubmit:e=>{e.preventDefault(),e.stopPropagation(),eP(n,l.classNames,s),i("")},children:(0,t.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[(0,t.jsxs)(R.Z,{children:[(0,t.jsx)(U.Z.Control,{placeholder:"Class name",value:n,onChange:e=>i(e.target.value)}),(0,t.jsxs)(x.Z,{variant:"primary",type:"submit",className:"d-inline-flex align-items-center",children:[(0,t.jsx)(P.poH,{size:20,className:"me-1"}),(0,t.jsx)("span",{children:"Add"})]})]}),(0,t.jsxs)(O,{title:"Class Name",className:"ms-1",children:["Type the class name and press ",(0,t.jsx)("kbd",{children:"ENTER"})," or click Add button"]}),(0,t.jsxs)(x.Z,{style:{whiteSpace:"nowrap"},className:"ms-4",variant:"outline-primary",disabled:0==e.cols.classification.classNames.length,onClick:()=>c(!0),children:[(0,t.jsx)(eL.P2_,{size:20,className:"me-1"})," Hotkeys"]}),(0,t.jsx)(O,{title:"Hotkeys",className:"ms-1",children:"Classify your table quickly by configuring keyboard keys to select classes"}),(0,t.jsx)(eU,{show:o,onHide:()=>c(!1)})]})}),l.classNames.map(a=>(0,t.jsxs)(eE,{className:"mb-1 me-1",onClose:()=>eO(a,l.classNames,s),children:[a,a in e.cols.classification.keyMap&&(0,t.jsxs)("span",{children:[" (",(0,t.jsx)("b",{children:e.cols.classification.keyMap[a].toUpperCase()}),")"]})]},"cname_".concat(a)))]})]})}function eU(e){let{show:s,onHide:l}=e,{tcState:n,tcDispatch:i}=(0,r.m6)(),c=n.cols.classification,[d,m]=(0,a.useState)(-1),u=(0,a.useCallback)(e=>{e.stopPropagation(),/^[\w\d]$/i.test(e.key)&&-1!=d&&i({type:o.p.CLASSIFICATION_CONFIG,payload:{keyMap:{...n.cols.classification.keyMap,[d]:e.key}}})},[i,n,d]);return(0,a.useEffect)(()=>(s?document.addEventListener("keydown",u,!0):document.removeEventListener("keydown",u,!0),()=>{document.removeEventListener("keydown",u,!0)}),[u,s]),(0,t.jsxs)(g.Z,{show:s,onHide:l,animation:!1,centered:!0,children:[(0,t.jsx)(g.Z.Header,{closeButton:!0,children:(0,t.jsx)(g.Z.Title,{id:"contained-modal-title-vcenter",children:"Hotkeys configuration"})}),(0,t.jsxs)(g.Z.Body,{children:[(0,t.jsx)("p",{className:"mb-3",children:"Select a class below and press an alphanumeric (A-Z, 0-9) character on the keyboard. After associating the keyboard shortcuts for the desired classes, just click on the table row and press the key referring to the class."}),(0,t.jsxs)(U.Z,{onSubmit:e=>e.preventDefault(),children:[(0,t.jsxs)(U.Z.Group,{as:A.Z,className:"mb-3",controlId:"hotkeyClass",children:[(0,t.jsx)(U.Z.Label,{column:!0,sm:2,children:"Class"}),(0,t.jsx)(k.Z,{sm:10,children:(0,t.jsxs)(U.Z.Select,{value:d,onChange:e=>m(e.target.value),children:[(0,t.jsx)("option",{value:-1,children:"Select a class"}),c.classNames.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})})]}),(0,t.jsxs)(A.Z,{className:"d-inline-flex align-items-center",children:[(0,t.jsx)(k.Z,{sm:2,children:"Hotkey"}),(0,t.jsx)(k.Z,{sm:3,children:(0,t.jsx)(U.Z.Control,{readOnly:!0,type:"text",size:"lg",value:c.keyMap[d]?c.keyMap[d].toUpperCase():"",style:{fontWeight:800,textAlign:"center"}})}),(0,t.jsx)(k.Z,{children:(0,t.jsx)(x.Z,{className:"ps-0",variant:"link",onClick:()=>{let e=n.cols.classification.keyMap;d in e&&(delete e[d],i({type:o.p.CLASSIFICATION_CONFIG,payload:{keyMap:e}}))},children:"Clear"})})]})]})]})]})}function eR(){let{tcState:e,tcDispatch:s}=(0,r.m6)(),l=e.cols.classification;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(U.Z.Group,{as:A.Z,className:"mb-2",controlId:"classCheck",children:[(0,t.jsx)(U.Z.Label,{column:!0,sm:"1",children:"Enable"}),(0,t.jsx)(k.Z,{sm:"11",className:"d-flex align-items-center",children:(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[(0,t.jsx)(U.Z.Check,{type:"switch",label:"Show classification column",checked:l.enabled,onChange:e=>s({type:o.p.CLASSIFICATION_CONFIG,payload:{enabled:e.target.checked}})}),(0,t.jsx)(O,{title:"Enable Classifications",className:"ms-1",children:"Select this option if you want to classify the table, unsect to hide the classification column"})]})})]}),(0,t.jsx)(ek,{})]})}let eA=["iso","aper3","aper6","auto","petro","pstotal"];function eF(){let{tcState:e,tcDispatch:s}=(0,r.m6)(),l=e.cols.sdssSpectra,a=e.cols.splusPhotoSpectra.selectedLines,n=(e,l)=>{l.includes(e)?s({type:o.p.SPLUS_PHOTO_SPECTRA,payload:{selectedLines:l.filter(s=>s!=e)}}):s({type:o.p.SPLUS_PHOTO_SPECTRA,payload:{selectedLines:[...l,e]}})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(U.Z.Group,{as:A.Z,className:"mb-2",controlId:"sloanSpecCheck",children:[(0,t.jsx)(U.Z.Label,{column:!0,sm:3,className:"text-end",children:"SDSS spectra"}),(0,t.jsx)(k.Z,{sm:9,className:"d-flex align-items-center",children:(0,t.jsx)(U.Z.Check,{type:"switch",label:"Show SDSS spectra column",checked:l.enabled,onChange:e=>s({type:o.p.SDSS_IMAGING,payload:{enabled:e.target.checked}})})})]}),(0,t.jsx)("hr",{className:"my-4"}),(0,t.jsxs)(U.Z.Group,{as:A.Z,className:"mb-2",controlId:"splus-photospec-check",children:[(0,t.jsx)(U.Z.Label,{column:!0,sm:3,className:"text-end",children:"S-PLUS photo-spectra"}),(0,t.jsx)(k.Z,{sm:9,className:"d-flex align-items-center",children:(0,t.jsx)(U.Z.Check,{type:"switch",label:"Show S-PLUS photo-spectra column",checked:e.cols.splusPhotoSpectra.enabled,onChange:()=>s({type:o.p.SPLUS_PHOTO_SPECTRA,payload:{enabled:!e.cols.splusPhotoSpectra.enabled}})})})]}),(0,t.jsxs)(U.Z.Group,{as:A.Z,className:"mb-2",controlId:"splus-photospec-check",children:[(0,t.jsx)(U.Z.Label,{column:!0,sm:3,className:"text-end",children:"Selected lines"}),(0,t.jsx)(k.Z,{sm:9,className:"d-flex align-items-center",children:eA.map(e=>(0,t.jsxs)(U.Z.Check,{inline:!0,type:"checkbox",id:"splus-photospectra-line-".concat(e),className:"me-3",children:[(0,t.jsx)(U.Z.Check.Input,{type:"checkbox",checked:a.includes(e),onChange:()=>n(e,a)}),(0,t.jsx)(U.Z.Check.Label,{children:e})]},e))})]})]})}function eG(){let{tcState:e,tcDispatch:s}=(0,r.m6)(),l=e.cols.legacyImaging;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(U.Z.Group,{as:A.Z,className:"mb-2",controlId:"legacyImagingCheck",children:[(0,t.jsx)(U.Z.Label,{column:!0,sm:"1",children:"Enable"}),(0,t.jsx)(k.Z,{sm:"11",className:"d-flex align-items-center",children:(0,t.jsx)(U.Z.Check,{type:"switch",label:"Show Legacy Survey RGB images column",checked:l.enabled,onChange:e=>s({type:o.p.LEGACY_IMAGING,payload:{enabled:e.target.checked}})})})]}),(0,t.jsxs)(A.Z,{className:"mb-3",children:[(0,t.jsx)(k.Z,{sm:5,children:(0,t.jsxs)(R.Z,{children:[(0,t.jsx)(R.Z.Text,{id:"legacyImagingPixScale",children:"Pixel scale"}),(0,t.jsx)(U.Z.Control,{"aria-label":"Pixel Scale","aria-describedby":"legacyImagingPixScale",value:l.pixelScale,onChange:e=>s({type:o.p.LEGACY_IMAGING,payload:{pixelScale:e.target.value}})}),(0,t.jsx)(R.Z.Text,{id:"legacyImagingPixScale2",children:"arcsec/pixel"})]})}),(0,t.jsx)(k.Z,{sm:4,className:"align-content-center",children:(0,t.jsxs)("div",{className:"d-flex",children:[(0,t.jsx)(U.Z.Check,{type:"switch",id:"auto-pix-scale",label:"Auto pixscale",className:"me-2",checked:l.autoPixelScale,onChange:e=>s({type:o.p.LEGACY_IMAGING,payload:{autoPixelScale:e.target.checked}})}),(0,t.jsx)(O,{title:"Add Columns",children:(0,t.jsxs)("ul",{children:[(0,t.jsxs)("li",{children:["When ",(0,t.jsx)("i",{children:"auto pixscale"})," is ",(0,t.jsx)("b",{children:"enabled"}),", AstroInspect will compute the pixscale for each object based on the",(0,t.jsx)("code",{children:"mag_r"})," and ",(0,t.jsx)("code",{children:"shape_r"})," values from the Legacy Survey catalogue. The specified value of pixscale will be used in cases where catalog values are not available."]}),(0,t.jsxs)("li",{children:["When ",(0,t.jsx)("i",{children:"auto pixscale"})," is ",(0,t.jsx)("b",{children:"disbled"}),", AstroInspect will only use the specified value of the pixscale."]})]})})]})})]}),(0,t.jsx)(A.Z,{children:(0,t.jsx)(k.Z,{sm:5,children:(0,t.jsxs)(R.Z,{children:[(0,t.jsx)(R.Z.Text,{children:"Data Release"}),(0,t.jsxs)(U.Z.Select,{value:l.dataRelease,onChange:e=>s({type:o.p.LEGACY_IMAGING,payload:{dataRelease:e.target.value}}),children:[(0,t.jsx)("option",{value:"10",children:"10"}),(0,t.jsx)("option",{value:"9",children:"9"})]})]})})})]})}var ez=l(71549),eD=l.n(ez);function eM(e){let{children:s,className:l="btn-light",onClick:a=()=>{}}=e;return(0,t.jsx)("div",{className:"".concat(eD().chip," ").concat(l),onClick:a,children:s})}let eV=["U","F378","F395","F410","F430","G","F515","R","F660","I","F861","Z"];function eB(e){let{band:s,channel:l,variant:a}=e,{tcState:n,tcDispatch:i}=(0,r.m6)(),c=n.cols.splusImaging.trilogyConfig,{R:d,G:m,B:u}=c,h=c[l].includes(s)?"btn-".concat(a):"btn-outline-".concat(a);return(0,t.jsx)(eM,{className:"".concat(h," me-1"),onClick:()=>i({type:o.p.SPLUS_TRILOGY_CONFIG,payload:function(e,s,l){let t={...e};for(let a in e)a!=s&&(t[a]=e[a].filter(e=>e!=l));return t[s].includes(l)?t[s]=t[s].filter(e=>e!=l):t[s].push(l),t}({R:d,G:m,B:u},l,s)}),children:s})}function eH(){let{tcState:e,tcDispatch:s}=(0,r.m6)(),l=e.cols.splusImaging.trilogyConfig;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(U.Z.Group,{as:A.Z,className:"mb-2",controlId:"splusTrilogyR",children:[(0,t.jsx)(U.Z.Label,{column:!0,sm:"1",className:"text-end",children:"R"}),(0,t.jsx)(k.Z,{sm:"11",className:"d-flex align-items-center",children:(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[eV.map(e=>(0,t.jsx)(eB,{band:e,channel:"R",variant:"danger"},"R_".concat(e))),(0,t.jsxs)(O,{title:"Red Composition",className:"ms-1",children:["Choose the S-PLUS bands that will be mapped to the"," ",(0,t.jsx)("span",{className:"text-danger",children:"red"})," channel of the"," ","RGB image. Each channel must be mapped by up to 1 S-PLUS filter"]})]})})]}),(0,t.jsxs)(U.Z.Group,{as:A.Z,className:"mb-2",controlId:"splusTrilogyG",children:[(0,t.jsx)(U.Z.Label,{column:!0,sm:"1",className:"text-end",children:"G"}),(0,t.jsx)(k.Z,{sm:"11",className:"d-flex align-items-center",children:(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[eV.map(e=>(0,t.jsx)(eB,{band:e,channel:"G",variant:"success"},"G_".concat(e))),(0,t.jsxs)(O,{title:"Green Composition",className:"ms-1",children:["Choose the S-PLUS bands that will be mapped to the"," ",(0,t.jsx)("span",{className:"text-success",children:"green"})," channel of the"," ","RGB image. Each channel must be mapped by up to 1 S-PLUS filter"]})]})})]}),(0,t.jsxs)(U.Z.Group,{as:A.Z,className:"mb-2",controlId:"splusTrilogyB",children:[(0,t.jsx)(U.Z.Label,{column:!0,sm:"1",className:"text-end",children:"B"}),(0,t.jsx)(k.Z,{sm:"11",className:"d-flex align-items-center",children:(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[eV.map(e=>(0,t.jsx)(eB,{band:e,channel:"B",variant:"primary"},"B_".concat(e))),(0,t.jsxs)(O,{title:"Blue Composition",className:"ms-1",children:["Choose the S-PLUS bands that will be mapped to the"," ",(0,t.jsx)("span",{className:"text-primary",children:"blue"})," channel of the"," ","RGB image. Each channel must be mapped by up to 1 S-PLUS filter"]})]})})]}),(0,t.jsxs)(U.Z.Group,{as:A.Z,className:"mb-2",controlId:"splusTrilogyParams",children:[(0,t.jsx)(U.Z.Label,{column:!0,sm:"1",className:"text-end",children:"Params"}),(0,t.jsx)(k.Z,{sm:9,children:(0,t.jsxs)(A.Z,{children:[(0,t.jsx)(k.Z,{children:(0,t.jsxs)(R.Z,{className:"mb-3",children:[(0,t.jsx)(R.Z.Text,{id:"trilogy-param-noise",children:"Noise"}),(0,t.jsx)(U.Z.Control,{"aria-label":"Noise","aria-describedby":"trilogy-param-noise",value:l.noise,onChange:e=>s({type:o.p.SPLUS_TRILOGY_CONFIG,payload:{noise:e.target.value}})})]})}),(0,t.jsx)(k.Z,{children:(0,t.jsxs)(R.Z,{className:"mb-3",children:[(0,t.jsx)(R.Z.Text,{id:"trilogy-param-q",children:"Q"}),(0,t.jsx)(U.Z.Control,{"aria-label":"Q","aria-describedby":"trilogy-param-q",value:l.Q,onChange:e=>s({type:o.p.SPLUS_TRILOGY_CONFIG,payload:{Q:e.target.value}})})]})}),(0,t.jsx)(k.Z,{children:(0,t.jsxs)(R.Z,{className:"mb-3",children:[(0,t.jsx)(R.Z.Text,{id:"pixelScale",children:"Pixel scale"}),(0,t.jsx)(U.Z.Control,{"aria-label":"Pixel scale","aria-describedby":"pixelScale",value:e.cols.splusImaging.pixelScale,onChange:e=>s({type:o.p.SPLUS_IMAGING,payload:{pixelScale:e.target.value}})})]})})]})})]})]})}function eq(){let{tcState:e,tcDispatch:s}=(0,r.m6)(),l=e.cols.splusImaging.luptonConfig;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(U.Z.Group,{as:A.Z,className:"mb-2",controlId:"splusLuptonColors",children:[(0,t.jsx)(U.Z.Label,{column:!0,sm:"1",children:"Colors"}),(0,t.jsx)(k.Z,{sm:8,children:(0,t.jsxs)(A.Z,{children:[(0,t.jsx)(k.Z,{children:(0,t.jsxs)(R.Z,{children:[(0,t.jsx)(R.Z.Text,{children:"R"}),(0,t.jsx)(U.Z.Select,{value:l.R,onChange:e=>s({type:o.p.SPLUS_LUPTON_CONFIG,payload:{R:e.target.value}}),children:eV.map(e=>(0,t.jsx)("option",{children:e},e))})]})}),(0,t.jsx)(k.Z,{children:(0,t.jsxs)(R.Z,{children:[(0,t.jsx)(R.Z.Text,{children:"G"}),(0,t.jsx)(U.Z.Select,{value:l.G,onChange:e=>s({type:o.p.SPLUS_LUPTON_CONFIG,payload:{G:e.target.value}}),children:eV.map(e=>(0,t.jsx)("option",{children:e},e))})]})}),(0,t.jsx)(k.Z,{children:(0,t.jsxs)(R.Z,{children:[(0,t.jsx)(R.Z.Text,{children:"B"}),(0,t.jsx)(U.Z.Select,{value:l.B,onChange:e=>s({type:o.p.SPLUS_LUPTON_CONFIG,payload:{B:e.target.value}}),children:eV.map(e=>(0,t.jsx)("option",{children:e},e))})]})})]})})]}),(0,t.jsxs)(U.Z.Group,{as:A.Z,className:"mb-2",controlId:"splusLuptonParams",children:[(0,t.jsx)(U.Z.Label,{column:!0,sm:"1",children:"Params"}),(0,t.jsx)(k.Z,{sm:8,children:(0,t.jsxs)(A.Z,{children:[(0,t.jsx)(k.Z,{children:(0,t.jsxs)(R.Z,{children:[(0,t.jsx)(R.Z.Text,{id:"lupton-param-noise",children:"Stretch"}),(0,t.jsx)(U.Z.Control,{"aria-label":"Stretch","aria-describedby":"lupton-param-noise",value:l.stretch,onChange:e=>s({type:o.p.SPLUS_LUPTON_CONFIG,payload:{stretch:e.target.value}})})]})}),(0,t.jsx)(k.Z,{children:(0,t.jsxs)(R.Z,{children:[(0,t.jsx)(R.Z.Text,{id:"lupton-param-q",children:"Q"}),(0,t.jsx)(U.Z.Control,{"aria-label":"Q","aria-describedby":"lupton-param-q",value:l.Q,onChange:e=>s({type:o.p.SPLUS_LUPTON_CONFIG,payload:{Q:e.target.value}})})]})}),(0,t.jsx)(k.Z,{children:(0,t.jsxs)(R.Z,{className:"mb-3",children:[(0,t.jsx)(R.Z.Text,{id:"pixelScale",children:"Pixel Scale"}),(0,t.jsx)(U.Z.Control,{"aria-label":"Pixel Scale","aria-describedby":"pixelScale",value:e.cols.splusImaging.pixelScale,onChange:e=>s({type:o.p.SPLUS_IMAGING,payload:{pixelScale:e.target.value}})})]})})]})})]})]})}function eK(){let{tcState:e,tcDispatch:s}=(0,r.m6)(),l=e.cols.splusImaging;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(U.Z.Group,{as:A.Z,className:"mb-2",controlId:"splusImagingCheck",children:[(0,t.jsx)(U.Z.Label,{column:!0,sm:"1",className:"text-end",children:"Enable"}),(0,t.jsx)(k.Z,{sm:"11",className:"d-flex align-items-center",children:(0,t.jsx)(U.Z.Check,{type:"switch",label:"Show S-PLUS RGB images column",checked:l.enabled,onChange:e=>s({type:o.p.SPLUS_IMAGING,payload:{enabled:e.target.checked}})})})]}),(0,t.jsxs)(U.Z.Group,{as:A.Z,className:"mb-2",controlId:"classCheck",children:[(0,t.jsx)(U.Z.Label,{column:!0,sm:"1",className:"text-end",children:"Type"}),(0,t.jsx)(k.Z,{sm:5,children:(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[(0,t.jsxs)(U.Z.Select,{defaultValue:l.type,onChange:e=>s({type:o.p.SPLUS_IMAGING,payload:{type:e.target.value}}),children:[(0,t.jsx)("option",{value:"trilogy",children:"Trilogy"}),(0,t.jsx)("option",{value:"lupton",children:"Lupton"})]}),(0,t.jsxs)(O,{title:"Image Type",className:"ms-1",children:["The algorithm used to make RGB stamps from the FITS file",(0,t.jsx)("br",{}),(0,t.jsx)("b",{children:"Trilogy: "})," The Trilogy algorithm",(0,t.jsx)("br",{}),(0,t.jsx)("b",{children:"Lupton: "})," The Lupton method"]})]})})]}),"trilogy"==l.type?(0,t.jsx)(eH,{}):(0,t.jsx)(eq,{})]})}var eW=l(57460),eQ=l.n(eW);class eY{getHeaderSummary(e){let s=I("ra",e),l=I("dec",e),t=null==e?void 0:e[s],a=null==e?void 0:e[l];return{raIndex:s,decIndex:l,raCol:t,decCol:a,columns:e,positionFound:s>-1&&l>-1}}async getTableSummary(){let e=await this.getColumns(),s=await this.getDataTypes();return e?{...this.getHeaderSummary(e),dataTypes:s}:void 0}}class eJ extends eY{readFromFile(){return new Promise((e,s)=>{eQ().parse(this.file,{complete:s=>{let{data:l}=s;return e(l)},error:e=>s(e),delimitersToGuess:[",","	"," ","|",";",eQ().RECORD_SEP,eQ().UNIT_SEP],skipEmptyLines:!0,header:!0,dynamicTyping:!0,transformHeader:(e,s)=>"tab:".concat(e)})})}readFromUrl(){return new Promise((e,s)=>{eQ().parse(this.file,{complete:s=>{let{data:l}=s;return e(l)},error:e=>s(e),skipEmptyLines:!0,header:!0,dynamicTyping:!0,download:!0,transformHeader:(e,s)=>"tab:".concat(e)})})}read(){return"string"==typeof this.file||this.file instanceof String?this.readFromUrl():this.readFromFile()}getColumnsFromFile(){return new Promise((e,s)=>{eQ().parse(this.file,{complete:l=>{var t;if(l.errors.length>0)return s(l.errors);e(null===(t=l.data)||void 0===t?void 0:t[0])},preview:1})})}getColumnsFromUrl(){return new Promise((e,s)=>{eQ().parse(this.file,{complete:l=>{var t;if(l.errors.length>0)return s(l.errors);e(null===(t=l.data)||void 0===t?void 0:t[0])},preview:1,download:!0})})}getColumns(){return"string"==typeof this.file||this.file instanceof String?this.getColumnsFromUrl():this.getColumnsFromFile()}getDataTypes(){}constructor(e){super(),this.file=e}}var eX=l(70918),e$=l(32634);let e0={BOOLEAN:"boolean",INT32:"number",INT64:void 0,INT96:void 0,FLOAT:"number",DOUBLE:"number",STRING:"text",BYTE_ARRAY:"object",FIXED_LEN_BYTE_ARRAY:"object",DEFAULT:void 0};class e1 extends eY{readFromFile(){return new Promise((e,s)=>{(async()=>{await (0,eX.RL)({file:await this.file.arrayBuffer(),onComplete:s=>e(s),compressors:e$.F})})().catch(e=>s(e))})}readFromUrl(){return new Promise((e,s)=>{(async()=>{await (0,eX.RL)({file:await (0,eX.EU)(this.file),onComplete:s=>e(s),compressors:e$.F})})().catch(e=>s(e))})}async read(){let e;e="string"==typeof this.file||this.file instanceof String?await this.readFromUrl():await this.readFromFile();let s=await this.getColumns();return s?e.map(e=>Object.fromEntries(Object.entries(e).map(e=>{let[l,t]=e;return["tab:".concat(s[l]),t]}))):e}async getMetaFromFile(){return void 0===this.meta&&(this.meta=(0,eX.tI)(await this.file.arrayBuffer())),this.meta}async getMetaFromUrl(){return void 0===this.meta&&(this.meta=await (0,eX.uI)(await (0,eX.EU)(this.file))),this.meta}async getColumnsFromFile(){return(await this.getMetaFromFile()).schema.filter(e=>"schema"!==e.name).map(e=>e.name)}async getColumnsFromUrl(){return(await this.getMetaFromUrl()).schema.filter(e=>"schema"!==e.name).map(e=>e.name)}async getColumns(){return void 0===this.columns&&("string"==typeof this.file||this.file instanceof String?this.columns=await this.getColumnsFromUrl():this.columns=await this.getColumnsFromFile()),this.columns}async getDataTypesFromFile(){return(await this.getMetaFromFile()).schema.filter(e=>"schema"!==e.name).map(e=>{var s,l,t;return e0[(null===(l=e.logical_type)||void 0===l?void 0:null===(s=l.type)||void 0===s?void 0:s.toUpperCase())||(null===(t=e.type)||void 0===t?void 0:t.toUpperCase())||"DEFAULT"]})}async getDataTypesFromUrl(){return(await this.getMetaFromUrl()).schema.filter(e=>"schema"!==e.name).map(e=>{var s,l,t;return e0[(null===(l=e.logical_type)||void 0===l?void 0:null===(s=l.type)||void 0===s?void 0:s.toUpperCase())||(null===(t=e.type)||void 0===t?void 0:t.toUpperCase())||"DEFAULT"]})}getDataTypes(){return"string"==typeof this.file||this.file instanceof String?this.getDataTypesFromUrl():this.getDataTypesFromFile()}constructor(e){super(),this.file=e,this.columns=void 0,this.meta=void 0}}function e2(e){var s,l;let t="string"==typeof e||e instanceof String?null===(s=e.split(".").pop())||void 0===s?void 0:s.toLowerCase():null===(l=e.name.split(".").pop())||void 0===l?void 0:l.toLowerCase();return["csv","tsv","dat","txt"].includes(t||"")?new eJ(e):["parquet","parq","par","pq"].includes(t||"")?new e1(e):void 0}var e5=l(45099),e6=l(44304);function e3(){let{tcState:e,tcDispatch:s}=(0,r.m6)(),l=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(e.table.file&&l.current){let s=new DataTransfer;s.items.add(e.table.file);let t=s.files;l.current.files=t}},[e.table.file]);let n=(0,a.useCallback)(l=>{if(l.target.files.length>0){var t;let a=l.target.files[0];s({type:o.p.USER_FILE_INPUT,payload:{state:"loading"}}),null===(t=e2(a))||void 0===t||t.getTableSummary().then(l=>{if(console.log("summary",l),void 0!==l){var t,n,i;let r="local"===e.table.type&&(a.name===(null===(t=e.table.file)||void 0===t?void 0:t.name)||a.size===(null===(n=e.table.file)||void 0===n?void 0:n.size)||a.lastModified===(null===(i=e.table.file)||void 0===i?void 0:i.lastModified));r||s({type:o.p.GRID_UPDATE,payload:{data:[],colDefs:[]}});let c=[];void 0!==l.raIndex&&l.raIndex>=0&&c.push(l.raIndex),void 0!==l.decIndex&&l.decIndex>=0&&c.push(l.decIndex),s({type:o.p.USER_FILE_INPUT,payload:{type:"local",columns:l.columns,selectedColumnsId:c,raIndex:l.raIndex,decIndex:l.decIndex,raCol:l.raCol,decCol:l.decCol,dataTypes:l.dataTypes,state:l.positionFound?"success":"positionNotFound",file:a,isSameFile:r}}),s({type:o.p.PLOT_SETUP,payload:{filterIndex:[],filterView:void 0,inspectSelected:!1}}),(0,e6.B)("load_file_local",{category:"load",label:"local",userId:e5.I})}}).catch(e=>{console.log(e),s({type:o.p.USER_FILE_INPUT,payload:{type:"local",columns:[],selectedColumnsId:[],raIndex:-1,decIndex:-1,raCol:void 0,decCol:void 0,dataTypes:void 0,state:"error",file:void 0}})})}},[e,s]);return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(U.Z.Group,{as:A.Z,className:"mb-2",controlId:"tableFile",children:[(0,t.jsx)(U.Z.Label,{column:!0,sm:"1",className:"text-end",children:"Table"}),(0,t.jsx)(k.Z,{sm:8,children:(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[(0,t.jsx)(U.Z.Control,{type:"file",onChange:n,ref:l}),(0,t.jsxs)(O,{title:"Local Upload",className:"ms-1",children:["Load a table available in local computer. The only required columns are ",(0,t.jsx)("code",{children:"RA"})," and ",(0,t.jsx)("code",{children:"DEC"})," in degrees.",(0,t.jsx)("br",{}),(0,t.jsx)("u",{children:"Available formars"}),": ",(0,t.jsx)("code",{children:"CSV"}),", ",(0,t.jsx)("code",{children:"TSV"}),", \xa0",(0,t.jsx)("code",{children:"DAT"}),", ",(0,t.jsx)("code",{children:"PARQUET"}),"."]})]})})]})})}let e4=new(l(54146)).Z,e8={on:(e,s)=>e4.on(e,s),once:(e,s)=>e4.once(e,s),off:(e,s)=>e4.off(e,s),emit:(e,s)=>e4.emit(e,s),count:e=>e4.listenerCount(e)};function e9(){let{tcState:e,tcDispatch:s}=(0,r.m6)(),l=(0,a.useCallback)(function(l){var t;let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];l.length>0&&RegExp("^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z0-9\\u00a1-\\uffff][a-z0-9\\u00a1-\\uffff_-]{0,62})?[a-z0-9\\u00a1-\\uffff]\\.)+(?:[a-z\\u00a1-\\uffff]{2,}\\.?))(?::\\d{2,5})?(?:[/?#]\\S*)?$","i").test(l)&&(s({type:o.p.USER_FILE_INPUT,payload:{state:"loading"}}),null===(t=e2(l))||void 0===t||t.getTableSummary().then(t=>{if(void 0!=t){let n="remote"===e.table.type&&l==e.table.url;n||s({type:o.p.GRID_UPDATE,payload:{data:[],colDefs:[]}});let i=[];void 0!==t.raIndex&&t.raIndex>=0&&i.push(t.raIndex),void 0!==t.decIndex&&t.decIndex>=0&&i.push(t.decIndex),s({type:o.p.USER_FILE_INPUT,payload:{type:"remote",columns:t.columns,selectedColumnsId:i,raIndex:t.raIndex,decIndex:t.decIndex,raCol:t.raCol,decCol:t.decCol,dataTypes:t.dataTypes,state:t.positionFound?"success":"positionNotFound",url:l,isSameFile:n}}),s({type:o.p.PLOT_SETUP,payload:{filterIndex:[],filterView:void 0,inspectSelected:!1}}),a&&s({type:o.p.CURRENT_VIEW_CHANGE,payload:"grid"}),(0,e6.B)("load_file_remote",{category:"load",label:"remote",userId:e5.I})}}).catch(e=>{console.log(e),s({type:o.p.USER_FILE_INPUT,payload:{type:"remote",columns:[],selectedColumnsId:[],raIndex:-1,decIndex:-1,raCol:void 0,decCol:void 0,dataTypes:void 0,state:"error",file:void 0}})}))},[s,e]);return(0,a.useEffect)(()=>{e8.on("INSERT_URL",e=>l(e.url,!0)),(0,e6.B)("load_file_example",{category:"load",label:"example",userId:e5.I})},[l]),(0,t.jsxs)(U.Z.Group,{as:A.Z,className:"mb-2",controlId:"tableFile",children:[(0,t.jsx)(U.Z.Label,{column:!0,sm:"1",className:"text-end",children:"URL"}),(0,t.jsx)(k.Z,{sm:10,children:(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[(0,t.jsx)(U.Z.Control,{placeholder:"File URL",onChange:e=>l(e.target.value),value:e.table.url||""}),(0,t.jsxs)(O,{title:"Remote Upload",className:"ms-1",children:["Loads a table available remotely in the internet.",(0,t.jsx)("br",{}),(0,t.jsx)("u",{children:"Available formars"}),": ",(0,t.jsx)("code",{children:"CSV"}),", ",(0,t.jsx)("code",{children:"TSV"}),", \xa0",(0,t.jsx)("code",{children:"DAT"}),", ",(0,t.jsx)("code",{children:"PARQUET"}),"."]})]})})]})}function e7(){let{tcState:e,tcDispatch:s}=(0,r.m6)();return(0,t.jsxs)(U.Z.Group,{as:A.Z,className:"mb-2",controlId:"tableSourceSelector",children:[(0,t.jsx)(U.Z.Label,{column:!0,sm:"1",className:"text-end"}),(0,t.jsx)(k.Z,{sm:5,children:(0,t.jsxs)(R.Z,{hasValidation:!0,children:[(0,t.jsx)(R.Z.Text,{children:"RA"}),(0,t.jsxs)(U.Z.Select,{required:!0,isInvalid:void 0==e.table.raIndex||e.table.raIndex<0,isValid:void 0!==e.table.raIndex&&e.table.raIndex>=0,value:e.table.raIndex,onChange:l=>{var t;let a=parseInt(l.target.value),n=[...e.table.selectedColumnsId];void 0!=e.table.raIndex&&n.includes(e.table.raIndex)&&(n=n.filter(s=>s!=e.table.raIndex)),n.includes(a)||n.push(a),s({type:o.p.USER_FILE_INPUT,payload:{raIndex:a,raCol:null===(t=e.table.columns)||void 0===t?void 0:t[l.target.value],selectedColumnsId:n,state:a>=0&&void 0!=e.table.decIndex&&e.table.decIndex>=0?"success":e.table.state}})},children:[(0,t.jsx)("option",{value:-1,children:"-"}),e.table.columns.map((e,s)=>(0,t.jsx)("option",{value:s,children:e},e))]}),(0,t.jsx)(U.Z.Control.Feedback,{type:"invalid",children:"RA column not found"}),(0,t.jsx)(U.Z.Control.Feedback,{type:"valid",children:"RA column detected"})]})}),(0,t.jsx)(k.Z,{sm:5,children:(0,t.jsxs)(R.Z,{hasValidation:!0,children:[(0,t.jsx)(R.Z.Text,{children:"DEC"}),(0,t.jsxs)(U.Z.Select,{required:!0,isInvalid:void 0==e.table.decIndex||e.table.decIndex<0,isValid:void 0!==e.table.decIndex&&e.table.decIndex>=0,value:e.table.decIndex,onChange:l=>{var t;let a=parseInt(l.target.value),n=[...e.table.selectedColumnsId];void 0!=e.table.decIndex&&n.includes(e.table.decIndex)&&(n=n.filter(s=>s!=e.table.decIndex)),n.includes(a)||n.push(a),s({type:o.p.USER_FILE_INPUT,payload:{decIndex:a,decCol:null===(t=e.table.columns)||void 0===t?void 0:t[l.target.value],selectedColumnsId:n,state:a>=0&&void 0!=e.table.raIndex&&e.table.raIndex>=0?"success":e.table.state}})},children:[(0,t.jsx)("option",{value:-1,children:"-"}),e.table.columns.map((e,s)=>(0,t.jsx)("option",{value:s,children:e},e))]}),(0,t.jsx)(U.Z.Control.Feedback,{type:"invalid",children:"DEC column not found"}),(0,t.jsx)(U.Z.Control.Feedback,{type:"valid",children:"DEC column detected"})]})})]})}Object.freeze(e8);let se=()=>{let{tcState:e,tcDispatch:s}=(0,r.m6)(),l=e=>{s({type:o.p.USER_FILE_INPUT,payload:{type:e.target.value}})};return(0,t.jsxs)(U.Z.Group,{as:A.Z,className:"mb-2",controlId:"tableSourceSelector",children:[(0,t.jsx)(U.Z.Label,{column:!0,sm:"1",className:"text-end",children:"Source"}),(0,t.jsx)(k.Z,{sm:"5",children:(0,t.jsxs)("div",{className:"d-flex align-items-center mt-2",children:[(0,t.jsx)(U.Z.Check,{inline:!0,checked:"local"===e.table.type,label:"local",name:"tableType",type:"radio",value:"local",id:"tableType-1",onChange:l}),(0,t.jsx)(U.Z.Check,{inline:!0,checked:"remote"===e.table.type,className:"ms-2",label:"remote",name:"tableType",type:"radio",value:"remote",id:"tableType-2",onChange:l}),(0,t.jsxs)(O,{title:"Upload Type",children:["Select upload type based on where the source table is stored.",(0,t.jsx)("br",{}),(0,t.jsxs)("ul",{children:[(0,t.jsxs)("li",{children:[(0,t.jsx)("b",{children:"Local: "})," Table stored in local computer",(0,t.jsx)("br",{})]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("b",{children:"Remote: "})," Table available in internet"]})]})]})]})})]})};function ss(e){let{colName:s,colId:l}=e,{tcState:a,tcDispatch:n}=(0,r.m6)(),i=a.table.selectedColumnsId.includes(l)?"btn-primary":"btn-outline-primary";return(0,t.jsx)(eM,{className:"".concat(i," me-2 mt-1"),onClick:()=>{let e=[];if(a.table.selectedColumnsId.includes(l)){let s=a.table.selectedColumnsId.indexOf(l);(e=[...a.table.selectedColumnsId]).splice(s,1)}else e=[...a.table.selectedColumnsId,l];n({type:o.p.USER_FILE_INPUT,payload:{selectedColumnsId:e}})},children:s})}function sl(){let{tcState:e}=(0,r.m6)();return(0,t.jsx)(t.Fragment,{children:e.table.columns&&e.table.columns.length>0&&(0,t.jsxs)(U.Z.Group,{as:A.Z,className:"mb-2",controlId:"tableSourceSelector",children:[(0,t.jsx)(U.Z.Label,{column:!0,sm:"1",className:"text-end",children:"Columns"}),(0,t.jsx)(k.Z,{sm:"11",children:(0,t.jsxs)("div",{style:{maxHeight:250,overflow:"auto"},children:[e.table.columns.map((e,s)=>(0,t.jsx)(ss,{colId:s,colName:e},s)),(0,t.jsx)(O,{title:"Add Columns",children:"Select columns from input table to include."})]})})]})})}function st(){let{tcState:e}=(0,r.m6)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(se,{}),(0,t.jsx)("div",{className:"remote"==e.table.type?"d-none":"",children:(0,t.jsx)(e3,{})}),(0,t.jsx)("div",{className:"local"==e.table.type?"d-none":"",children:(0,t.jsx)(e9,{})}),(0,t.jsx)("div",{className:"unloaded"==e.table.state?"d-none":"",children:(0,t.jsx)(e7,{})}),(0,t.jsx)(sl,{})]})}var sa=l(43236),sn=l(9800);class si{callFunction(e){for(var s=arguments.length,l=Array(s>1?s-1:0),t=1;t<s;t++)l[t-1]=arguments[t];return new Promise((s,t)=>{this.currentRequests.push({resolve:s,reject:t,fnToCall:e,args:l}),this.tryNext()})}tryNext(){if(this.runningRequests<this.maxConcurrentRequests){let e=this.currentRequests.shift();if(e){this.runningRequests++;let s=e.args;e.fnToCall.apply(null,s).then(s=>e.resolve(s)).catch(s=>e.reject(s)).finally(()=>{this.runningRequests--,this.tryNext()})}}}clear(){this.currentRequests=[]}constructor(e=1){this.currentRequests=[],this.runningRequests=0,this.maxConcurrentRequests=e}}class sr{create(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;e in this.pool||(this.pool[e]=new si(s))}enqueue(e,s){for(var l=arguments.length,t=Array(l>2?l-2:0),a=2;a<l;a++)t[a-2]=arguments[a];return this.pool[e].callFunction(s,...t)}getSignal(){return this.controller.signal}clear(e){if(e)this.pool[e].clear();else for(let e in this.pool)this.pool[e].clear()}constructor(){this.pool={},this.controller=new AbortController}}let so=new sr;var sc=l(87066),sd=l(4400),sm=l.n(sd),su=l(36772);async function sh(e){try{let s=await e();return{statusCode:s.status,error:!1,data:s.data}}catch(e){return{error:!0,statusCode:null==e?void 0:e.status,data:void 0}}}so.create("sdss_cone_spec",4),so.create("sdss_sql",2),so.create("sdss_batch_query",2),so.create("sdss_query",2);let sp=new su.S({defaultOptions:{queries:{staleTime:S(1,"day","ms")}}});class sx{getQuery(e,s,l,t){return"SELECT p.fiber2Mag_z ".concat(t.map(e=>"t.".concat(e)).join(","),"\n    FROM PhotoObj p, dbo.fGetNearbyObjEq(326.8952189, 0.7732093, 0.02) n\n    WHERE p.objID = n.objID")}getCrossIdQuery(e,s){let l="photo"==this.objType?"objID":"specObjID";return"\n    SELECT \n      ".concat(s.map(e=>"t.".concat(e)).join(","),"\n    FROM #upload u\n      JOIN #x x ON x.up_id = u.up_id\n      JOIN ").concat(e," t ON t.").concat(this.pkColumn||l," = x.").concat(l,"\n    ORDER by x.up_id\n    ").trim()}constructor(e){let{objType:s="photo",raColumn:l="ra",decColumn:t="dec",pkColumn:a=null}=e||{};this.raColumn=l,this.decColumn=t,this.pkColumn=a,this.objType=s}}let sg={PhotoTag:{searchStrategy:new sx,type:"view"},SpecObjAll:{searchStrategy:new sx({objType:"spectro"}),type:"table"},emissionLinesPort:{searchStrategy:new sx({objType:"spectro"}),type:"table"},TwoMass:{searchStrategy:new sx,type:"table"},zooSpec:{searchStrategy:new sx,type:"table"},zooNoSpec:{searchStrategy:new sx,type:"table"},zoo2MainSpecZ:{searchStrategy:new sx({pkColumn:"dr8objid"}),type:"table"}};class sj{async getObjSpecId(e,s){try{return(await sp.fetchQuery({queryKey:["sdss-service-specid",e,s],queryFn:()=>sc.Z.get("https://skyserver.sdss.org/dr18/SkyServerWS/SpectroQuery/ConeSpectro",{params:{ra:e,dec:s,radius:.01667,limit:1,format:"xml",specparams:"specObjID",imgparams:"none",zWarning:"on"},signal:so.getSignal(),transformResponse:e=>{let s=new DOMParser().parseFromString(e,"application/xml").querySelector('Table[name="Table1"] > Row > Item[name="specObjID"]');return null==s?void 0:s.textContent}})})).data}catch(e){console.log(e)}}async getTables(){return Object.keys(sg)}async getColumns(e){var s,l;let t;t="table"==sg[e].type?"SELECT name, description, unit \n      FROM DBColumns \n      WHERE tablename='".concat(e,"'"):"\n      SELECT tc.name name, tc.description description, tc.unit unit\n      FROM DBColumns tc\n      INNER JOIN DBViewCols vc ON vc.parent = tc.tablename AND vc.name = tc.name\n      WHERE vc.viewname='".concat(e,"' \n      ").trim();let a="".concat("https://skyserver.sdss.org/dr18/SkyServerWS/SearchTools/SqlSearch","?cmd=").concat(encodeURIComponent(t),"&format=json");return null===(l=(await sp.fetchQuery({queryKey:["sdss-service-columns",e],queryFn:()=>sc.Z.get(a)})).data)||void 0===l?void 0:null===(s=l[0])||void 0===s?void 0:s.Rows}getCsv(e){return"index,ra,dec\r\n"+(e.map(e=>"".concat(e.index,",").concat(e.ra,",").concat(e.dec)).join("\r\n")||"")}}class sy extends sj{async fetch(){let e=await this.getObjSpecId(this.ra,this.dec);if(e)return{data:"".concat("https://skyserver.sdss.org/dr18/en/get/SpecById.ashx","?id=").concat(e)}}constructor(e,s){super(),this.ra=e,this.dec=s}}class sf extends sj{async fetch(){let e=sg[this.table].searchStrategy,s=e.getCrossIdQuery(this.table,[this.column]);return await sp.fetchQuery({queryKey:["sdss-query",this.ra,this.dec,this.table,this.column],queryFn:()=>sh(()=>sc.Z.get("https://skyserver.sdss.org/dr18/SkyServerWS/SearchTools/CrossIdSearch",{params:{searchtool:"CrossID",searchType:e.objType,photoScope:"nearPrim",spectroScope:"nearPrim",photoUpType:"ra-dec",spectroUpType:"ra-dec",radius:.016667,firstcol:1,paste:this.getCsv([{index:0,ra:this.ra,dec:this.dec}]),uquery:s,format:"JSON"},transformResponse:e=>{var s;let l=sm()({storeAsString:!0}).parse(e).find(e=>"Table1"==e.TableName).Rows;if(l.length>0)return null===(s=l[0])||void 0===s?void 0:s[this.column]}}))})}constructor(e,s,l,t){super(),this.ra=e,this.dec=s,this.table=l,this.column=t}}var sb=l(9282);let sv=e=>{let{items:s,active:l,onClick:a,height:n,className:i}=e;return(0,t.jsx)(eT.Z,{className:"".concat(i," overflow-auto"),style:{height:n},children:s.map((e,s)=>(0,t.jsx)(eT.Z.Item,{action:!0,active:l==e,onClick:l=>a({title:e,index:s,event:l}),children:e},s))})},sC=e=>{let{items:s,active:l,onClick:a,height:n,className:i}=e;return(0,t.jsx)(eT.Z,{className:"".concat(i," overflow-auto"),style:{height:n},children:s.map((e,s)=>(0,t.jsx)(eT.Z.Item,{action:!0,variant:l&&l.includes(e)?"primary":"",onClick:l=>a({title:e,index:s,event:l}),children:e},s))})},sS=e=>{let{className:s,height:l}=e;return(0,t.jsxs)(eT.Z,{className:"".concat(s," overflow-auto"),style:{height:l},children:[(0,t.jsx)(sb.Z,{as:eT.Z.Item,animation:"glow",children:(0,t.jsx)(sb.Z,{xs:6})}),(0,t.jsx)(sb.Z,{as:eT.Z.Item,animation:"glow",children:(0,t.jsx)(sb.Z,{xs:9})}),(0,t.jsx)(sb.Z,{as:eT.Z.Item,animation:"glow",children:(0,t.jsx)(sb.Z,{xs:4})}),(0,t.jsx)(sb.Z,{as:eT.Z.Item,animation:"glow",children:(0,t.jsx)(sb.Z,{xs:5})}),(0,t.jsx)(sb.Z,{as:eT.Z.Item,animation:"glow",children:(0,t.jsx)(sb.Z,{xs:11})}),(0,t.jsx)(sb.Z,{as:eT.Z.Item,animation:"glow",children:(0,t.jsx)(sb.Z,{xs:7})}),(0,t.jsx)(sb.Z,{as:eT.Z.Item,animation:"glow",children:(0,t.jsx)(sb.Z,{xs:8})}),(0,t.jsx)(sb.Z,{as:eT.Z.Item,animation:"glow",children:(0,t.jsx)(sb.Z,{xs:5})})]})};function sI(e){let{items:s=[],active:l=[],multiple:a=!1,placeholder:n=!1,onClick:i=()=>{},height:r=260,className:o=""}=e;return(0,t.jsx)(t.Fragment,{children:n?(0,t.jsx)(sS,{className:o,height:r}):a?(0,t.jsx)(sC,{items:s,active:l,onClick:i,height:r,className:o}):(0,t.jsx)(sv,{items:s,active:l,onClick:i,height:r,className:o})})}var sZ=l(8582),sN=l(44908),sT=l.n(sN);function s_(e){let{initialSelectedTable:s="",service:l,selectedColumns:n=[],onAddColumn:i,onRemoveColumn:r}=e,[o,c]=(0,a.useState)(s),[d,m]=(0,a.useState)(""),[u,h]=(0,a.useState)([]),[p,g]=(0,a.useState)(void 0),[j,y]=(0,a.useState)(!0),f=(0,a.useMemo)(()=>sT()(n.map(e=>e.table)),[n]);(0,a.useEffect)(()=>{o&&(y(!0),l.getColumns(o).then(e=>{h(e),y(!1)}).catch(console.log))},[o,l]),(0,a.useEffect)(()=>{l.getTables().then(e=>{g(e),y(!1),e.length>0&&c(e[0])}).catch(console.log)},[l]);let b=(0,a.useMemo)(()=>null==u?void 0:u.map(e=>e.name),[u])||[],v=(0,a.useMemo)(()=>null==u?void 0:u.find(e=>e.name==d),[u,d]),C=(0,a.useMemo)(()=>n.findIndex(e=>e.column==d&&e.table==o)>-1,[n,d,o]);return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(A.Z,{children:[(0,t.jsxs)(k.Z,{sm:5,children:[(0,t.jsxs)(A.Z,{className:"align-items-center",children:[(0,t.jsx)(k.Z,{lg:2,children:(0,t.jsx)("span",{className:"text-muted fw-bold",children:"Table:"})}),(0,t.jsx)(k.Z,{children:(0,t.jsx)(U.Z.Select,{defaultValue:o,onChange:e=>{y(!0),m(""),c(e.target.value)},children:p&&p.map(e=>(0,t.jsx)("option",{value:e,children:e},e))})})]}),(0,t.jsx)(sI,{placeholder:j,items:b,active:d,className:"mt-2",height:290,onClick:e=>{let{title:s}=e;return m(s)}})]}),j?(0,t.jsxs)(k.Z,{children:[(0,t.jsx)(sn.Z,{animation:"border",variant:"secondary",as:"span",size:"sm",className:"me-2"}),(0,t.jsxs)("span",{className:"text-muted",children:["Loading columns of the ",(0,t.jsx)("u",{children:o})," table"]})]}):(0,t.jsxs)(k.Z,{children:[v&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsxs)("b",{children:[v.name,":"]}),"\xa0",v.description,".\xa0",v.unit&&(0,t.jsxs)(t.Fragment,{children:["Unit: ",(0,t.jsx)("i",{dangerouslySetInnerHTML:{__html:v.unit}})]})]}),(0,t.jsx)("div",{children:C?(0,t.jsxs)(x.Z,{variant:"outline-danger",size:"sm",onClick:()=>r(o,d),children:[(0,t.jsx)(sZ.HeX,{})," Remove Selected Column"]}):(0,t.jsxs)(x.Z,{variant:"outline-success",size:"sm",onClick:()=>i(o,d),children:[(0,t.jsx)(P.poH,{size:16})," Add Selected Column"]})})]}),n.length>0&&(0,t.jsx)("div",{className:"mt-4",children:f.map(e=>(0,t.jsxs)("div",{className:"mb-1",children:[(0,t.jsxs)("span",{className:"me-2 fw-bold text-muted",children:[e,":"]}),n.filter(s=>s.table==e).map(e=>(0,t.jsx)(eE,{className:"mb-1 me-1",onClose:()=>r(e.table,e.column),children:e.column},e.column))]},e))})]})]})})}let sw=new sj;function sE(){let{tcState:e,tcDispatch:s}=(0,r.m6)(),l=e.cols.sdssCatalog.selectedColumns;return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(s_,{onAddColumn:(e,t)=>{e&&t&&s({type:o.p.SDSS_CATALOG,payload:{selectedColumns:[...l,{table:e,column:t}]}})},onRemoveColumn:(e,t)=>{if(!e||!t)return;let a=l.findIndex(s=>s.column==t&&s.table==e);s({type:o.p.SDSS_CATALOG,payload:{selectedColumns:l.filter((e,s)=>s!=a)}})},selectedColumns:l,service:sw})})}let sL=e=>{var s,l;let{index:a}=e,{tcState:n,tcDispatch:i}=(0,r.m6)(),c=n.cols.customImaging.columns[a];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(A.Z,{children:[(0,t.jsx)(k.Z,{sm:8,children:(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[(0,t.jsxs)(R.Z,{className:"mb-2",size:"sm",children:[(0,t.jsx)(R.Z.Text,{children:"Base URL"}),(0,t.jsx)(U.Z.Control,{value:c.url,onChange:e=>i({type:o.p.CUSTOM_IMAGE_UPDATE,payload:{index:a,url:e.target.value}})})]}),(0,t.jsxs)(O,{title:"Base Resource URL",className:"mb-2 ms-1",children:["The ",(0,t.jsx)("b",{children:"base resource url"})," is the first (static) part of the URL. This value must starts with ",(0,t.jsx)("code",{children:"http://"})," ","or ",(0,t.jsx)("code",{children:"https://"}),(0,t.jsx)("br",{}),"The final url for each row is:",(0,t.jsx)("br",{}),(0,t.jsx)("kbd",{children:"Base URL"})," + ",(0,t.jsx)("kbd",{children:"RI column"})," + ",(0,t.jsx)("kbd",{children:"suffix"})]})]})}),(0,t.jsx)(k.Z,{sm:4,children:(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[(0,t.jsxs)(R.Z,{size:"sm",children:[(0,t.jsx)(R.Z.Text,{children:"Suffix"}),(0,t.jsx)(U.Z.Control,{value:c.fileExtension,onChange:e=>i({type:o.p.CUSTOM_IMAGE_UPDATE,payload:{index:a,fileExtension:e.target.value}})})]}),(0,t.jsxs)(O,{title:"URL Suffix",className:"ms-1",children:["The ",(0,t.jsx)("b",{children:"url suffix"})," is the last (static) part of the URL and "," ","is used to specify the file extension, for example.",(0,t.jsx)("br",{}),"The final url for each row is:",(0,t.jsx)("br",{}),(0,t.jsx)("kbd",{children:"Base URL"})," + ",(0,t.jsx)("kbd",{children:"RI column"})," + ",(0,t.jsx)("kbd",{children:"suffix"})]})]})})]}),(0,t.jsxs)(A.Z,{children:[(0,t.jsx)(k.Z,{sm:8,children:(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[(0,t.jsxs)(R.Z,{className:"",size:"sm",children:[(0,t.jsx)(R.Z.Text,{children:"RI column"}),(0,t.jsxs)(U.Z.Select,{defaultValue:(null===(l=n.cols.customImaging.columns)||void 0===l?void 0:null===(s=l[a])||void 0===s?void 0:s.columnIndex)||-1,onChange:e=>i({type:o.p.CUSTOM_IMAGE_UPDATE,payload:{index:a,columnIndex:parseInt(e.target.value)}}),children:[(0,t.jsx)("option",{value:-1,children:"Select a column"}),n.table.columns.map((e,s)=>(0,t.jsx)("option",{value:s,children:e},s))]})]}),(0,t.jsxs)(O,{title:"Resource Identification Column",className:" ms-1",children:["The ",(0,t.jsx)("b",{children:"resource identification column"})," (RI column) is the "," ","only variable part of the url. This field must specify the "," ","column to use to make a specific url for each row.",(0,t.jsx)("br",{}),"The final url for each row is:",(0,t.jsx)("br",{}),(0,t.jsx)("kbd",{children:"Base URL"})," + ",(0,t.jsx)("kbd",{children:"RI Column"})," + ",(0,t.jsx)("kbd",{children:"suffix"})]})]})}),(0,t.jsx)(k.Z,{sm:4,children:(0,t.jsxs)(x.Z,{variant:"outline-danger",size:"sm",onClick:()=>i({type:o.p.CUSTOM_IMAGE_REMOVE,payload:{index:a,prevColumns:n.cols.customImaging.columns}}),children:[(0,t.jsx)(sZ.HeX,{})," Remove column"]})})]})]})};function sP(){let{tcState:e,tcDispatch:s}=(0,r.m6)(),l=e.cols.customImaging;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(U.Z.Group,{as:A.Z,className:"mb-2",controlId:"customImagingCheck",children:[(0,t.jsx)(U.Z.Label,{column:!0,sm:"1",children:"Enable"}),(0,t.jsx)(k.Z,{sm:"11",className:"d-flex align-items-center",children:(0,t.jsx)(U.Z.Check,{type:"switch",label:"Show custom images columns",checked:l.enabled,onChange:e=>s({type:o.p.CUSTOM_IMAGE_ENABLE,payload:{enabled:e.target.checked}})})})]}),l.columns.map((e,s)=>(0,t.jsxs)(a.Fragment,{children:[(0,t.jsx)(sL,{index:s}),(0,t.jsx)("hr",{className:"my-4"})]},s)),(0,t.jsx)(A.Z,{children:(0,t.jsx)(k.Z,{children:(0,t.jsxs)(x.Z,{size:"sm",onClick:()=>s({type:o.p.CUSTOM_IMAGE_NEW,payload:{prevColumns:e.cols.customImaging.columns}}),children:[(0,t.jsx)(P.poH,{size:16})," Add custom image column"]})})})]})}var sO=l(71950),sk=l(77405);let sU=e=>{let{name:s,url:l}=e,{tcDispatch:a}=(0,r.m6)();return(0,t.jsx)(x.Z,{variant:"link",onClick:()=>{a({type:o.p.USER_FILE_INPUT,payload:{type:"remote",url:l}}),e8.emit("INSERT_URL",{url:l})},children:s})};function sR(){let{tcState:e,tcDispatch:s}=(0,r.m6)();return(0,t.jsxs)(u.Z,{className:"mt-5",children:[(0,t.jsxs)("div",{className:"border rounded rounded-3 p-4",style:{backgroundColor:"#fafafa"},children:[(0,t.jsxs)("h6",{className:"text-center mb-4 d-flex align-items-center justify-content-center",children:[(0,t.jsx)(sk.s7j,{className:"me-2",size:20}),(0,t.jsx)("span",{children:"Table Settings"})]}),(0,t.jsxs)(eN.Z.Container,{id:"list-group-tabs-example",defaultActiveKey:"#select-table",children:[(0,t.jsxs)(A.Z,{children:[(0,t.jsx)(k.Z,{sm:3,children:(0,t.jsxs)(eT.Z,{children:[(0,t.jsx)(eT.Z.Item,{action:!0,href:"#select-table",children:"Select a table"}),(0,t.jsx)(eT.Z.Item,{action:!0,href:"#classification",children:"Classification"}),(0,t.jsx)(eT.Z.Item,{action:!0,href:"#sdss",children:"SDSS catalog"}),(0,t.jsx)(eT.Z.Item,{action:!0,href:"#splus",children:"S-PLUS images"}),(0,t.jsx)(eT.Z.Item,{action:!0,href:"#legacy",children:"Legacy images"}),(0,t.jsx)(eT.Z.Item,{action:!0,href:"#custom-images",children:"Custom images"}),(0,t.jsx)(eT.Z.Item,{action:!0,href:"#spectra",children:"Spectra & photo-spectra"})]})}),(0,t.jsx)(k.Z,{sm:9,children:(0,t.jsxs)(eN.Z.Content,{children:[(0,t.jsx)(eN.Z.Pane,{eventKey:"#select-table",children:(0,t.jsx)(st,{})}),(0,t.jsx)(eN.Z.Pane,{eventKey:"#classification",children:(0,t.jsx)(eR,{})}),(0,t.jsx)(eN.Z.Pane,{eventKey:"#sdss",children:(0,t.jsx)(sE,{})}),(0,t.jsx)(eN.Z.Pane,{eventKey:"#splus",children:(0,t.jsx)(eK,{})}),(0,t.jsx)(eN.Z.Pane,{eventKey:"#legacy",children:(0,t.jsx)(eG,{})}),(0,t.jsx)(eN.Z.Pane,{eventKey:"#custom-images",children:(0,t.jsx)(sP,{})}),(0,t.jsx)(eN.Z.Pane,{eventKey:"#spectra",children:(0,t.jsx)(eF,{})})]})})]}),(0,t.jsx)(A.Z,{children:(0,t.jsx)(k.Z,{sm:3,className:"mx-auto",children:(0,t.jsx)(x.Z,{className:"mt-3 w-100 fw-bold",variant:"success",size:"lg",onClick:e=>{s({type:o.p.CURRENT_VIEW_CHANGE,payload:"grid"})},disabled:"success"!==e.table.state,children:"loading"===e.table.state?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(sn.Z,{as:"span",size:"sm",role:"status",animation:"border",variant:"light"})," Loading"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(sO.tcg,{className:"me-2",size:30})," Load Table"]})})})})]})]}),(0,t.jsxs)(A.Z,{className:"mt-5",children:[(0,t.jsx)(k.Z,{sm:7,children:(0,t.jsxs)(sa.Z,{variant:"info",children:[(0,t.jsx)(sa.Z.Heading,{children:"\uD83C\uDF89 New Version!"}),(0,t.jsx)("h6",{children:"Features of the software release v1.0:"}),(0,t.jsxs)("ul",{children:[(0,t.jsxs)("li",{children:["Add support to ",(0,t.jsx)("b",{children:"PARQUET"})," files"]}),(0,t.jsxs)("li",{children:["Handle ",(0,t.jsx)("b",{children:"big tables"})," (hundreds of thousands of rows)"]}),(0,t.jsxs)("li",{children:["Column relocation and row ",(0,t.jsx)("b",{children:"sorting and filtering"})]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("b",{children:"Faster loading"})," of resources with multiple parallel connections"]}),(0,t.jsxs)("li",{children:["Display of the ",(0,t.jsx)("b",{children:"loading status"})," of each external resource"]}),(0,t.jsx)("li",{children:"Support for remote files"})]})]})}),(0,t.jsx)(k.Z,{sm:5,children:(0,t.jsxs)(sa.Z,{variant:"success",children:[(0,t.jsx)(sa.Z.Heading,{children:"\uD83D\uDCA1 Examples"}),(0,t.jsx)("h6",{children:"Click on one of the links below to open an example table:"}),(0,t.jsxs)("ul",{children:[(0,t.jsxs)("li",{children:[(0,t.jsx)(sU,{name:"galaxyzoo-small-sample.csv",url:"https://astroinspect.natanael.net/examples/galaxyzoo-small-sample.csv"}),"\xa0(250 rows, 11.5kB)"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)(sU,{name:"galaxyzoo-medium-sample.csv",url:"https://astroinspect.natanael.net/examples/galaxyzoo-medium-sample.csv"}),"\xa0(2,500 rows, 113.8kB)"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)(sU,{name:"galaxyzoo-big-sample.parquet",url:"https://astroinspect.natanael.net/examples/galaxyzoo-big-sample.parquet"}),"\xa0(250,000 rows, 6.8MB)"]})]})]})})]})]})}let sA=new su.S({defaultOptions:{queries:{staleTime:S(1,"day","ms")}}});class sF{async search(e,s,l){return(await sA.fetchQuery({queryKey:["scs",e,s],queryFn:()=>sh(()=>sc.Z.get(this.url,{signal:so.getSignal(),params:{ra:e,dec:s,sr:l},transformResponse:e=>{var s,l,t,a;let n=new DOMParser().parseFromString(e,"application/xml"),i=null===(s=n.querySelector('VOTABLE > RESOURCE > INFO[name="TableRows"]'))||void 0===s?void 0:s.getAttribute("value");if(i&&parseInt(i)>0){let e=n.querySelectorAll("VOTABLE > RESOURCE > TABLE > FIELD"),s=n.querySelector("VOTABLE > RESOURCE > TABLE > DATA > TABLEDATA > TR"),i=null==s?void 0:s.querySelectorAll("TD"),r={};for(let s=0;s<e.length;s++){let n=null===(l=e[s])||void 0===l?void 0:l.getAttribute("name"),o=null===(t=e[s])||void 0===t?void 0:t.getAttribute("datatype"),c=null==i?void 0:null===(a=i[s])||void 0===a?void 0:a.textContent;"float"===o||"double"===o?c=parseFloat(c):"int"===o&&(c=parseInt(c)),n&&(r[n]=c)}return r}}}))})).data}constructor(e){this.url=e}}var sG=l(12647);let sz=[0,8.5,9.5,10.5,11.5,12.5,13.5,14.5,15.5,16.5,17.5,18.5,19.5,100],sD=[11.5,11.5,6,5.9,5.3,4.5,3.95,3.45,4.2,4.8,7.1,5.6,1.5,1.5],sM=new su.S({defaultOptions:{queries:{staleTime:S(1,"day","ms")}}});class sV{async computePixscale(){let e=new sF("https://bittersweet-large-ticket.glitch.me/https://datalab.noirlab.edu/scs/ls_dr10/tractor");try{let s=await e.search(this.ra,this.dec,1.5/3600),l=null==s?void 0:s.mag_r,t=null==s?void 0:s.shape_r;if(Number.isFinite(l)&&Number.isFinite(t)){let e=(0,sG.Z)(sz,sD,[l],"linear"),s=2*t*e[0]/this.size;return Math.max(Math.min(s,10),.12)}return}catch(e){console.log(e);return}}async fetch(){let e=this.pixscale;if(this.autoPixscale){let s=await this.computePixscale();void 0!=s&&null!=s&&(e=s)}return await sM.fetchQuery({queryKey:[this.ra,this.dec,this.size,e,this.layer],queryFn:()=>sh(()=>sc.Z.get("https://www.legacysurvey.org/viewer/cutout.jpg",{responseType:"blob",signal:so.getSignal(),params:{ra:this.ra,dec:this.dec,size:this.size,pixscale:e,layer:this.layer}}))})}constructor(e,s,l,t,a=!0,n="ls-dr10"){this.ra=e,this.dec=s,this.layer=n,this.pixscale=t,this.autoPixscale=a,this.size=l}}l(16932);let sB=new su.S({defaultOptions:{queries:{staleTime:S(12,"hour","ms")}}});so.create("splus-flux-radius",1);class sH{getParams(){var e,s,l,t,a,n,i,r,o,c,d,m,u;return"trilogy"===this.type?{ra:this.ra,dec:this.dec,size:this.stampSize,r:null===(i=this.config)||void 0===i?void 0:null===(n=i.R)||void 0===n?void 0:n.join(","),g:null===(o=this.config)||void 0===o?void 0:null===(r=o.G)||void 0===r?void 0:r.join(","),b:null===(d=this.config)||void 0===d?void 0:null===(c=d.B)||void 0===c?void 0:c.join(","),noise:null===(m=this.config)||void 0===m?void 0:m.noise,q:null===(u=this.config)||void 0===u?void 0:u.Q}:{ra:this.ra,dec:this.dec,size:this.stampSize,r:null===(e=this.config)||void 0===e?void 0:e.R,g:null===(s=this.config)||void 0===s?void 0:s.G,b:null===(l=this.config)||void 0===l?void 0:l.B,stretch:null===(t=this.config)||void 0===t?void 0:t.stretch,q:null===(a=this.config)||void 0===a?void 0:a.Q}}getUrl(){return"trilogy"===this.type?"https://checker-melted-forsythia.glitch.me/trilogy.png":"https://checker-melted-forsythia.glitch.me/lupton.png"}async fetch(){return await sB.fetchQuery({queryKey:[this.ra,this.dec,this.stampSize,this.type,this.config],queryFn:()=>sh(()=>sc.Z.get(this.getUrl(),{responseType:"blob",signal:so.getSignal(),params:this.getParams()}))})}constructor(e,s,l,t,a){this.ra=e,this.dec=s,this.pixscale=l,this.type=t,this.config=a,this.stampSize=Math.min(Math.round(300*this.pixscale/.55),1e3)}}class sq{async fetch(){return await sB.fetchQuery({queryKey:[this.ra,this.dec,this.lines],queryFn:()=>sh(()=>sc.Z.get("https://astrotools.vercel.app/plot",{responseType:"blob",signal:so.getSignal(),params:{ra:this.ra,dec:this.dec,...this.lines.reduce((e,s)=>(e[s]="",e),{})}}))})}constructor(e,s,l){this.ra=e,this.dec=s,this.lines=l}}l(78083),l(87180);var sK=l(50975),sW=l(50361),sQ=l.n(sW),sY=l(44173);l(79422),so.create("img:legacy",6),so.create("img:splus",5),so.create("img:splus_photospec",5),so.create("img:sdss_spec",4),so.create("sdss_cat",4);let sJ=async e=>{let{resourceFetch:s,colId:l,rowId:t,grid:a,isImage:n=!0}=e,i=a.api.getRowNode(t);if(((null==i?void 0:i.data[l])===B||(null==i?void 0:i.data[l])===void 0)&&(null==i?void 0:i.data.hasOwnProperty(l)))try{null==i||i.setDataValue(l,H);let e=await s.fetch();n?null==i||i.setDataValue(l,URL.createObjectURL(e.data)):null==i||i.setDataValue(l,e.data)}catch(e){null==i||i.setDataValue(l,q)}},sX=e=>{let{url:s,colId:l,rowId:t,grid:a}=e,n=a.api.getRowNode(t);if(((null==n?void 0:n.data[l])===B||(null==n?void 0:n.data[l])===void 0)&&(null==n?void 0:n.data.hasOwnProperty(l)))try{null==n||n.setDataValue(l,s)}catch(e){null==n||n.setDataValue(l,q)}};function s$(){let{tcState:e,tcDispatch:s}=(0,r.m6)(),[l,n]=(0,a.useState)(!0),i=(0,a.useRef)(null),c=(0,a.useCallback)(async l=>{var t,a,i;let r,c;e.table.isSameFile&&(null===(t=e.grid.currColConfigs)||void 0===t?void 0:t.classification.enabled)&&e.cols.classification.enabled&&(c=e.grid.data.map(e=>({"ai:class":e["ai:class"]}))),r="local"===e.table.type?await (null===(a=e2(e.table.file))||void 0===a?void 0:a.read()):await (null===(i=e2(e.table.url))||void 0===i?void 0:i.read());let{colDef:d,initVal:m}=eh.getColDefs(e);r=null==r?void 0:r.map((e,s,l)=>({...e,...m,"ai:id":String(s+1)})),c&&(r=null==r?void 0:r.map((e,s,l)=>({...e,...c[s]}))),n(!1),s({type:o.p.GRID_UPDATE,payload:{data:r,colDef:d,isLoaded:!0,currColConfigs:sQ()(e.cols),currTable:{...e.table},api:l.api}}),s({type:o.p.USER_FILE_INPUT,payload:{isSameFile:!0}})},[e,s]),d=(0,a.useCallback)(s=>{let l=s.api.paginationGetPageSize(),t=s.api.paginationGetCurrentPage(),a=[];s.api.forEachNodeAfterFilterAndSort(e=>{a.push(e.data)});let n=t*l,r=a.slice(n,n+l+100),o=e.table.columns[e.table.raIndex],c=e.table.columns[e.table.decIndex];so.clear(),r.forEach(s=>{let l=s["tab:".concat(o)],t=s["tab:".concat(c)],a=s["ai:id"];if(e.cols.legacyImaging.enabled&&so.enqueue("img:legacy",sJ,{resourceFetch:new sV(l,t,300,e.cols.legacyImaging.pixelScale,e.cols.legacyImaging.autoPixelScale),colId:"img:legacy",rowId:a,grid:i.current}),e.cols.splusImaging.enabled){let s="trilogy"===e.cols.splusImaging.type?e.cols.splusImaging.trilogyConfig:e.cols.splusImaging.luptonConfig;so.enqueue("img:splus",sJ,{resourceFetch:new sH(l,t,e.cols.splusImaging.pixelScale,e.cols.splusImaging.type,s),colId:"img:splus",rowId:a,grid:i.current})}e.cols.splusPhotoSpectra.enabled&&so.enqueue("img:splus_photospec",sJ,{resourceFetch:new sq(l,t,e.cols.splusPhotoSpectra.selectedLines),colId:"img:splus_photospec",rowId:a,grid:i.current}),e.cols.sdssSpectra.enabled&&so.enqueue("img:sdss_spec",sJ,{resourceFetch:new sy(l,t),colId:"img:sdss_spec",rowId:a,grid:i.current,isImage:!1}),e.cols.customImaging.enabled&&e.cols.customImaging.columns.forEach((l,t,n)=>{let r="tab:".concat(e.table.columns[l.columnIndex]);sX({url:"".concat(l.url).concat(s[r]||"").concat(l.fileExtension||""),colId:"img:custom_".concat(t),rowId:a,grid:i.current})}),e.cols.sdssCatalog.selectedColumns.forEach(e=>{so.enqueue("sdss_cat",sJ,{resourceFetch:new sf(l,t,e.table,e.column),colId:"sdss:".concat(e.table,"_").concat(e.column),rowId:a,grid:i.current,isImage:!1})})})},[e]),m=(0,a.useCallback)(s=>{let l=s.event;if(l){if("c"===l.key.toLowerCase()&&l.ctrlKey)navigator.clipboard.writeText(s.value),sY.Am.success("Copied: ".concat(s.value),{position:"bottom-center",autoClose:1e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0,theme:"dark",delay:100});else if(e.cols.classification.enabled&&!l.altKey&&!l.ctrlKey&&!l.shiftKey)for(let[t,a]of Object.entries(e.cols.classification.keyMap))a.toLowerCase()==l.key.toLowerCase()&&s.node.setDataValue("ai:class",t)}},[e.cols.classification.enabled,e.cols.classification.keyMap]),h=(0,a.useCallback)(e=>e.data["ai:id"],[]),p=(0,a.useMemo)(()=>[50,100,200,400,600,800,1e3],[]),x={suppressHorizontalScroll:!1,multiSortKey:"ctrl"};(e.cols.splusImaging.enabled||e.cols.legacyImaging.enabled||e.cols.sdssSpectra.enabled||e.cols.splusPhotoSpectra.enabled||e.cols.customImaging.enabled&&e.cols.customImaging.columns.length>0)&&(x.rowHeight=120);let g=(0,a.useCallback)(s=>{if(s.data){var l;return null===(l=e.plots.filterIndex)||void 0===l?void 0:l.includes(s.sourceRowIndex)}return!0},[e.plots.filterIndex]);return(0,t.jsxs)(u.Z,{fluid:!0,className:"px-0",style:{height:"100%"},children:[(0,t.jsx)("div",{className:"ag-theme-quartz",style:{width:"100%",height:"100%","--ag-cell-horizontal-padding":"8px","--ag-borders":"solid 1px","--ag-wrapper-border-radius":"0px","--ag-header-height":"38px"},children:(0,t.jsx)(sK.s,{gridOptions:x,ref:i,rowData:e.grid.data||[],columnDefs:e.grid.colDef||[],getRowId:h,loading:l,style:{height:"100%"},pagination:!0,paginationPageSize:50,paginationPageSizeSelector:p,onGridReady:c,onPaginationChanged:d,onSortChanged:d,onFilterChanged:d,onCellKeyDown:m,singleClickEdit:!0,isExternalFilterPresent:()=>e.plots.inspectSelected,doesExternalFilterPass:g})}),(0,t.jsx)(sY.Ix,{})]})}var s0=l(50356);function s1(e){let{label:s,value:l="",dispatchKey:a,dispatchType:n}=e,{tcState:i,tcDispatch:o}=(0,r.m6)();return(0,t.jsxs)(R.Z,{children:[s&&(0,t.jsx)(R.Z.Text,{children:s}),(0,t.jsxs)(U.Z.Select,{value:l,onChange:e=>{o({type:n,payload:{[a]:e.target.value}})},children:[(0,t.jsx)("option",{value:"",children:"-"}),i.table.columns.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]})}var s2=l(5152),s5=l.n(s2);function s6(){return(0,t.jsxs)(ef.Z,{direction:"horizontal",children:[(0,t.jsx)(sn.Z,{animation:"border",role:"status",variant:"secondary",size:"sm"}),(0,t.jsx)("span",{className:"text-secondary ms-2",children:"Loading..."})]})}let s3=s5()(()=>Promise.all([l.e(960),l.e(660)]).then(l.bind(l,58660)),{loadableGenerated:{webpack:()=>[58660]},ssr:!1,loading:s6});function s4(e){let s,l,t,a,n,i;return(s=e.slice().sort((e,s)=>e-s)).length/4%1==0?(l=.5*(s[s.length/4]+s[s.length/4+1]),t=.5*(s[s.length*(3/4)]+s[s.length*(3/4)+1])):(l=s[Math.floor(s.length/4+1)],t=s[Math.ceil(s.length*(3/4)+1)]),a=t-l,n=t+2.5*a,i=t-2.5*a,{q1:l,q3:t,iqr:a,maxValue:n,minValue:i}}function s8(e,s){if(e.length<4||s.length<4)return[e,s];let l=s4(e),t=s4(s),a=[],n=[];for(let i=0;i<e.length;i++){let r=e[i],o=s[i];r>=l.minValue&&r<=l.maxValue&&o>=t.minValue&&o<=t.maxValue?(a.push(r),n.push(o)):(a.push(void 0),n.push(void 0))}return[a,n]}function s9(e,s,l){if(e.length<4||s.length<4||l.length<4)return[e,s,l];let t=s4(e),a=s4(s),n=s4(l),i=[],r=[],o=[];for(let c=0;c<e.length;c++){let d=e[c],m=s[c],u=l[c];d>=t.minValue&&d<=t.maxValue&&m>=a.minValue&&m<=a.maxValue&&u>=n.minValue&&u<=n.maxValue?(i.push(d),r.push(m),o.push(u)):(i.push(void 0),r.push(void 0),o.push(void 0))}return[i,r,o]}function s7(e){let{onClick:s}=e;return(0,t.jsx)(x.Z,{variant:"outline-primary",className:"p-1",onClick:s,children:(0,t.jsx)(D.x82,{size:22})})}function le(){let{tcState:e,tcDispatch:s}=(0,r.m6)(),l=e.plots.scatter,n=(0,a.useMemo)(()=>{var s,t,a;let n,i;let r,o=[];return""!=l.xColumn&&(r=null===(s=e.grid.data)||void 0===s?void 0:s.map(e=>e["tab:".concat(l.xColumn)])),""!=l.yColumn&&(o=null===(t=e.grid.data)||void 0===t?void 0:t.map(e=>e["tab:".concat(l.yColumn)])),""!=l.colorColumn&&(n=null===(a=e.grid.data)||void 0===a?void 0:a.map(e=>e["tab:".concat(l.colorColumn)]),i={orientation:"v"}),e.plots.scatter.filterOutliers&&r&&o&&r.length==o.length&&r.length>0&&(""!=l.colorColumn?[r,o,n]=s9(r,o,n):[r,o]=s8(r,o)),[{x:r,y:o,mode:"markers",name:"points",marker:{color:n||"royalblue",size:3,opacity:.7,colorbar:i},type:"scatter"},{x:r,name:"x density",marker:{color:"royalblue"},yaxis:"y2",type:"histogram"},{y:o,name:"y density",marker:{color:"royalblue"},xaxis:"x2",type:"histogram"}]},[e.grid.data,l.xColumn,l.yColumn,l.colorColumn,e.plots.scatter.filterOutliers]),i={showlegend:!1,autosize:!0,height:740,margin:{t:50},hovermode:"closest",bargap:0,uirevision:"true",xaxis:{domain:[0,.85],showgrid:!1,zeroline:!1,title:l.xColumn},yaxis:{domain:[0,.85],showgrid:!1,zeroline:!1,title:l.yColumn},xaxis2:{domain:[.85,1],showgrid:!1,zeroline:!1},yaxis2:{domain:[.85,1],showgrid:!1,zeroline:!1}};return(0,t.jsxs)("div",{className:"container-fluid w-100 mt-2",children:[(0,t.jsxs)(U.Z.Group,{as:A.Z,className:"mb-3",controlId:"x-axis",children:[(0,t.jsx)(k.Z,{children:(0,t.jsxs)(ef.Z,{direction:"horizontal",gap:2,children:[(0,t.jsx)("span",{className:"fw-bold",style:{wordBreak:"keep-all"},children:"x-axis:"}),(0,t.jsx)(s1,{value:l.xColumn,dispatchKey:"xColumn",dispatchType:o.p.SCATTER_PLOT_SETUP}),(0,t.jsx)(s7,{onClick:()=>s({type:o.p.SCATTER_PLOT_SETUP,payload:{xColumn:l.yColumn,yColumn:l.xColumn}})})]})}),(0,t.jsx)(k.Z,{children:(0,t.jsxs)(ef.Z,{direction:"horizontal",gap:2,children:[(0,t.jsx)("span",{className:"fw-bold ms-lg-2",style:{wordBreak:"keep-all"},children:"y-axis:"}),(0,t.jsx)(s1,{value:l.yColumn,dispatchKey:"yColumn",dispatchType:o.p.SCATTER_PLOT_SETUP})]})}),(0,t.jsx)(k.Z,{children:(0,t.jsxs)(ef.Z,{direction:"horizontal",gap:2,children:[(0,t.jsx)("span",{className:"fw-bold ms-lg-2",style:{wordBreak:"keep-all"},children:"color:"}),(0,t.jsx)(s1,{value:l.colorColumn,dispatchKey:"colorColumn",dispatchType:o.p.SCATTER_PLOT_SETUP})]})}),(0,t.jsx)(k.Z,{className:"align-content-center",children:(0,t.jsxs)(ef.Z,{direction:"horizontal",gap:3,children:[(0,t.jsx)(U.Z.Check,{type:"switch",id:"filter-outliers-scatter",label:"Filter outliers",checked:e.plots.scatter.filterOutliers,onChange:e=>s({type:o.p.SCATTER_PLOT_SETUP,payload:{filterOutliers:e.target.checked}})}),(0,t.jsx)(x.Z,{disabled:0==e.plots.filterIndex.length||"scatter"!=e.plots.filterView,onClick:()=>{s({type:o.p.PLOT_SETUP,payload:{inspectSelected:!0}}),s({type:o.p.CURRENT_VIEW_CHANGE,payload:"grid"})},children:"Inspect Selected"})]})})]}),(0,t.jsx)(s3,{data:n,layout:i,config:{responsive:!0},className:"w-100",onSelected:e=>{var l;let t=null==e?void 0:null===(l=e.points)||void 0===l?void 0:l.map(e=>e.pointIndex);t&&t.length>0&&s({type:o.p.PLOT_SETUP,payload:{filterIndex:t,filterView:"scatter"}})}})]})}function ls(){let{tcState:e,tcDispatch:s}=(0,r.m6)(),l=e.plots.color,n=(0,a.useMemo)(()=>{var s,t;let a,n=[];return""!=l.xColumn1&&""!=l.xColumn2&&(a=null===(s=e.grid.data)||void 0===s?void 0:s.map(e=>e["tab:".concat(l.xColumn1)]-e["tab:".concat(l.xColumn2)])),""!=l.yColumn1&&""!=l.yColumn2&&(n=null===(t=e.grid.data)||void 0===t?void 0:t.map(e=>e["tab:".concat(l.yColumn1)]-e["tab:".concat(l.yColumn2)])),[a,n]},[e.grid.data,l.xColumn1,l.xColumn2,l.yColumn1,l.yColumn2]),i=(0,a.useMemo)(()=>{let s,t;let[a,i]=n;if(""!=l.colorColumn){var r;s=null===(r=e.grid.data)||void 0===r?void 0:r.map(e=>e["tab:".concat(l.colorColumn)]),t={orientation:"v"}}return e.plots.color.filterOutliers&&a&&i&&a.length==i.length&&a.length>0&&(""!=l.colorColumn?[a,i,s]=s9(a,i,s):[a,i]=s8(a,i)),[{x:a,y:i,mode:"markers",name:"points",marker:{color:s||"royalblue",size:3,opacity:.7,colorbar:t},type:"scatter"},{x:a,name:"x density",marker:{color:"royalblue"},yaxis:"y2",type:"histogram"},{y:i,name:"y density",marker:{color:"royalblue"},xaxis:"x2",type:"histogram"}]},[n,e.plots.color.filterOutliers,l.colorColumn,e.grid.data]),c={showlegend:!1,autosize:!0,height:740,margin:{t:50},hovermode:"closest",bargap:0,uirevision:"true",xaxis:{domain:[0,.85],showgrid:!1,zeroline:!1,title:"".concat(l.xColumn1," - ").concat(l.xColumn2)},yaxis:{domain:[0,.85],showgrid:!1,zeroline:!1,title:"".concat(l.yColumn1," - ").concat(l.yColumn2)},xaxis2:{domain:[.85,1],showgrid:!1,zeroline:!1},yaxis2:{domain:[.85,1],showgrid:!1,zeroline:!1}};return(0,t.jsxs)("div",{className:"container-fluid w-100 mt-2",children:[(0,t.jsxs)(U.Z.Group,{as:A.Z,className:"mb-3",controlId:"x-axis",children:[(0,t.jsx)(k.Z,{sm:6,children:(0,t.jsxs)(ef.Z,{direction:"horizontal",gap:2,children:[(0,t.jsx)("span",{className:"fw-bold",style:{wordBreak:"keep-all"},children:"x-axis:"}),(0,t.jsx)(s1,{value:l.xColumn1,dispatchKey:"xColumn1",dispatchType:o.p.COLOR_PLOT_SETUP}),(0,t.jsx)("span",{className:"fw-bold",children:""}),(0,t.jsx)(s1,{value:l.xColumn2,dispatchKey:"xColumn2",dispatchType:o.p.COLOR_PLOT_SETUP}),(0,t.jsx)(s7,{onClick:()=>s({type:o.p.COLOR_PLOT_SETUP,payload:{xColumn1:l.yColumn1,yColumn1:l.xColumn1,xColumn2:l.yColumn2,yColumn2:l.xColumn2}})})]})}),(0,t.jsx)(k.Z,{sm:6,children:(0,t.jsxs)(ef.Z,{direction:"horizontal",gap:2,children:[(0,t.jsx)("span",{className:"fw-bold ms-lg-2",style:{wordBreak:"keep-all"},children:"y-axis:"}),(0,t.jsx)(s1,{value:l.yColumn1,dispatchKey:"yColumn1",dispatchType:o.p.COLOR_PLOT_SETUP}),(0,t.jsx)("span",{className:"mx-2 fw-bold",children:""}),(0,t.jsx)(s1,{value:l.yColumn2,dispatchKey:"yColumn2",dispatchType:o.p.COLOR_PLOT_SETUP})]})})]}),(0,t.jsxs)(U.Z.Group,{as:A.Z,controlId:"x-axis",children:[(0,t.jsx)(k.Z,{sm:4,children:(0,t.jsxs)(ef.Z,{direction:"horizontal",gap:2,children:[(0,t.jsx)("span",{className:"fw-bold ms-lg-2",style:{wordBreak:"keep-all"},children:"color:"}),(0,t.jsx)(s1,{value:l.colorColumn,dispatchKey:"colorColumn",dispatchType:o.p.COLOR_PLOT_SETUP})]})}),(0,t.jsx)(k.Z,{sm:4,className:"align-content-center ms-2",children:(0,t.jsxs)(ef.Z,{direction:"horizontal",gap:3,children:[(0,t.jsx)(U.Z.Check,{type:"switch",id:"filter-outliers-color",label:"Filter outliers",checked:e.plots.color.filterOutliers,onChange:e=>s({type:o.p.COLOR_PLOT_SETUP,payload:{filterOutliers:e.target.checked}})}),(0,t.jsx)(x.Z,{disabled:0==e.plots.filterIndex.length||"color"!=e.plots.filterView,onClick:()=>{s({type:o.p.PLOT_SETUP,payload:{inspectSelected:!0}}),s({type:o.p.CURRENT_VIEW_CHANGE,payload:"grid"})},children:"Inspect Selected"})]})})]}),(0,t.jsx)(s3,{data:i,layout:c,config:{responsive:!0},className:"w-100",onSelected:e=>{var l,t;let a=null==e?void 0:null===(l=e.points)||void 0===l?void 0:l.map(e=>e.pointIndex);a&&a.length>0&&s({type:o.p.PLOT_SETUP,payload:{filterIndex:null==e?void 0:null===(t=e.points)||void 0===t?void 0:t.map(e=>e.pointIndex),filterView:"color"}})}})]})}function ll(){let{tcState:e,tcDispatch:s}=(0,r.m6)(),l=e.plots.histogram,n=(0,a.useMemo)(()=>{let s=[];if(""!=l.column){var t;s=null===(t=e.grid.data)||void 0===t?void 0:t.map(e=>e["tab:".concat(l.column)])}return e.plots.histogram.filterOutliers&&s&&s.length>0&&(s=function(e){if(e.length<4)return e;let s=s4(e);return e.map(e=>{if(e>=s.minValue&&e<=s.maxValue)return e})}(s)),[{x:s,name:"x density",marker:{color:"royalblue"},type:"histogram"}]},[e.grid.data,l.column,e.plots.histogram.filterOutliers]),i={showlegend:!1,autosize:!0,height:740,hovermode:"closest",bargap:0,uirevision:"true",xaxis:{showgrid:!1,zeroline:!1,title:l.column},yaxis:{showgrid:!1,zeroline:!1,title:"Count"}};return(0,t.jsxs)("div",{className:"container-fluid w-100 mt-2",children:[(0,t.jsxs)(U.Z.Group,{as:A.Z,className:"mb-3",controlId:"x-axis",children:[(0,t.jsx)(k.Z,{sm:3,children:(0,t.jsxs)(ef.Z,{direction:"horizontal",gap:2,children:[(0,t.jsx)("span",{className:"fw-bold",style:{wordBreak:"keep-all"},children:"x-axis:"}),(0,t.jsx)(s1,{value:l.column,dispatchKey:"column",dispatchType:o.p.HISTOGRAM_PLOT_SETUP})]})}),(0,t.jsx)(k.Z,{sm:3,className:"align-content-center",children:(0,t.jsxs)(ef.Z,{direction:"horizontal",gap:3,children:[(0,t.jsx)(U.Z.Check,{type:"switch",id:"filter-outliers-histogram",label:"Filter outliers",checked:e.plots.histogram.filterOutliers,onChange:e=>s({type:o.p.HISTOGRAM_PLOT_SETUP,payload:{filterOutliers:e.target.checked}})}),(0,t.jsx)(x.Z,{disabled:0==e.plots.filterIndex.length||"histogram"!=e.plots.filterView,onClick:()=>{s({type:o.p.PLOT_SETUP,payload:{inspectSelected:!0}}),s({type:o.p.CURRENT_VIEW_CHANGE,payload:"grid"})},children:"Inspect Selected"})]})})]}),(0,t.jsx)(s3,{data:n,layout:i,config:{responsive:!0},className:"w-100",onSelected:e=>{var l,t;let a=null==e?void 0:null===(l=e.points)||void 0===l?void 0:l.map(e=>e.pointIndex);a&&a.length>0&&s({type:o.p.PLOT_SETUP,payload:{filterIndex:null==e?void 0:null===(t=e.points)||void 0===t?void 0:t.map(e=>e.pointIndex),filterView:"histogram"}})}})]})}let lt=s5()(()=>Promise.all([l.e(860),l.e(139)]).then(l.bind(l,7139)),{loadableGenerated:{webpack:()=>[7139]},ssr:!1,loading:s6});function la(){return(0,t.jsx)(lt,{width:"100%",height:"100%"})}function ln(){let{tcState:e,tcDispatch:s}=(0,r.m6)();return(0,t.jsxs)("div",{className:"w-100 h-100 d-flex flex-column",children:[(0,t.jsxs)(s0.Z,{justify:!0,fill:!0,variant:"underline",defaultActiveKey:e.plots.currentView,className:"mt-1",onSelect:e=>{s({type:o.p.PLOT_VIEW_CHANGE,payload:e})},children:[(0,t.jsx)(s0.Z.Item,{children:(0,t.jsx)(s0.Z.Link,{eventKey:"scatter",children:"Scatter plot"})}),(0,t.jsx)(s0.Z.Item,{children:(0,t.jsx)(s0.Z.Link,{eventKey:"color",children:"Color-color diagram"})}),(0,t.jsx)(s0.Z.Item,{children:(0,t.jsx)(s0.Z.Link,{eventKey:"histogram",children:"Histogram"})}),(0,t.jsx)(s0.Z.Item,{children:(0,t.jsx)(s0.Z.Link,{eventKey:"aladin",children:"Aladin"})})]}),"scatter"==e.plots.currentView&&(0,t.jsx)(le,{}),"color"==e.plots.currentView&&(0,t.jsx)(ls,{}),"histogram"==e.plots.currentView&&(0,t.jsx)(ll,{}),"aladin"==e.plots.currentView&&(0,t.jsx)(la,{})]})}function li(){let{tcState:e}=(0,r.m6)();return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"d-flex flex-column h-100",children:[(0,t.jsx)(eZ,{}),(0,t.jsxs)("div",{className:"flex-grow-1",children:["settings"==e.currentView&&(0,t.jsx)(sR,{}),"grid"==e.currentView&&(0,t.jsx)(s$,{}),"plots"==e.currentView&&(0,t.jsx)(ln,{})]})]})})}function lr(){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(m(),{children:[(0,t.jsx)("link",{rel:"icon",href:"data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>\uD83C\uDF0C</text></svg>"}),(0,t.jsx)("title",{children:"AstroInspect"})]}),(0,t.jsxs)(r.uu,{children:[(0,t.jsx)(c,{}),(0,t.jsx)(li,{})]})]})}},71549:function(e){e.exports={chip:"ButtonChip_chip__DD9VL"}},17615:function(e){e.exports={chip:"Chip_chip__5QeIu",pointer:"Chip_pointer__BzSv_",closebtn:"Chip_closebtn__JicWE"}}},function(e){e.O(0,[909,391,838,509,510,321,365,738,817,594,563,43,888,774,179],function(){return e(e.s=48312)}),_N_E=e.O()}]);